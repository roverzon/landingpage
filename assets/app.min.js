(function(){
  'use strict';
    /**
  * app Module
  *
  * Description
  */
  angular.module('pandaApp', [
    'app.core',
    'app.landing'
  ]);
})();
(function(){
  'use strict';
  /**
  * app.core Module
  *
  * Description
  */
  angular
    .module('app.core',[
      'blocks.router',
      'ui.router'
      ])
})();
(function(){
  'use strict';

  /**
  * app.landing Module
  *
  * Description
  */
  angular.module('app.landing',[
      'app.core',
      'landing.home',
      'landing.about',
      'landing.career',
      'landing.demo',
      'landing.navbar'
    ])
})();
(function(){
  'use strict';
 /**
 * blocks.router Module
 *
 * Description
 */
  
  angular.module('blocks.router', [
    'ui.router'
    ]);
})();
(function(){
  'use strict';
  /**
  * app.about Module
  *
  * Description
  */
  angular
    .module('landing.about', [
      'app.core'
    ])
})();
(function(){
  'use strict';

  /**
  * app.register Module
  *
  * Description
  */
  angular
    .module('app.register', [
      'ui.bootstrap'
    ]);
})();
(function(){
  'use strict';
  /**
  * app.career Module
  *
  * Description
  */
  angular
    .module('landing.career',[
      'app.core',
      'ui.router'
    ]);
})();
(function(){
  'use strict';

  /**
  * landing.demo Module
  *
  * Description
  */
  angular
    .module('landing.demo', []);
})();
(function(){
  /**
  * app.panda-home Module
  *
  * Description
  */
  angular
    .module('landing.home',[
      'app.core'
    ])

})();
(function(){
  'use strict';
  /**
  * app.navbar Module
  *
  * Description
  */
  angular
    .module('landing.navbar', [
      'ui.bootstrap',
      'app.register'
    ]);
})();
(function(){
  'use strict';
  /**
  * app.landing Module
  *
  * Description
  */
    angular
    .module('app.landing')
    .run(appRun);

    appRun.$inject = ['routerHelper'];

    function appRun( routerHelper ){
      routerHelper.configureState(getStates());
    };

    function getStates(){
      return [
        {
          state: 'landing',
          config: {
              abstract : true,
              templateUrl: './common/content.html'
          }
        }
      ];
    };
})();
(function(){
  'use strict';

  /**
  * blocks.router Module
  *
  * Description
  */
  angular
    .module('blocks.router')
    .provider('routerHelper',routerHelperProvider);

    routerHelperProvider.$inject = ['$locationProvider','$stateProvider','$urlRouterProvider'];

  function routerHelperProvider($locationProvider,$stateProvider,$urlRouterProvider){

    var config = {
      docTitle : '成長熊貓'
    }

    // $locationProvider.html5Mode({
    //   enabled: true,
    //   requireBase: false
    // });

    this.$get = RouterHelper;

    RouterHelper.$inject = ['$state','$rootScope'];

    function RouterHelper($state, $rootScope){
      var hasOtherwise = false; 

      var service = {
        configureState : configureState,
        getStates : getStates
      };

      init();

      return service;

      function configureState(states, otherwisePath){
        states.forEach(function(state){
          $stateProvider.state(state.state,state.config);
        });

        if ( otherwisePath && !hasOtherwise) {
          hasOtherwise = true; 
          $urlRouterProvider.otherwise(otherwisePath);
        };
      };
      function getStates(){ return $state.get()};

      function init(){
        updateDocTitle();
      };

      function updateDocTitle(){
        $rootScope.$on('$stateChangeSuccess',
          function(event, toState, toParams, fromState, fromParams){
            var title = config.docTitle + ' | ' + (toState.title || '');
            $rootScope.title = title;
          });
      }
    
    };
  };

})();

(function(){
  'use strict';
  /**
  * app.core Module
  *
  * Description
  */
  angular
    .module('app.core')
    .factory('AccountService',AccountService);

    AccountService.$inject = ['$http'];

    function AccountService($http){
        return {
          postAccount : postAccount
        };

        function postAccount(account){
          return $http.post('/api/accounts', account)
                  .then(postSuccess)
                  .catch(postFailed);

          function postSuccess(res){
            return res.data;
          };

          function postFailed(res){
            return console.log(res);
          };

        }; 
    };

})();
(function(){
  'use strict';
  /**
* pandaApp Module
*
* Description
*/
angular
  .module('landing.about')
  .controller('AboutController',AboutController)

  AboutController.$inject = ['$rootScope'];

  function AboutController($rootScope){
    var vm = this; 
    var top = $("#career").offset().top  - 3.5*parseFloat($('#career').css('marginTop').replace(/auto/,0));
    $('#joinus').click(function () {
        $('html,body').animate({scrollTop:top}, 500);
    });

  };

})();

(function(){
  'use strict';

  /**
  * app.home Module
  *
  * Description
  */
  angular
    .module('landing.about')
    .run(appRun);

    appRun.$inject = ['routerHelper'];

    function appRun( routerHelper ){
      routerHelper.configureState(getStates());
    }

    function getStates() {
        return [
            {
                state: 'landing.about',
                config: {
                    templateUrl: 'panda-about.html',
                    url: '/about',
                    controller : 'AboutController',
                    controllerAs : 'AboutCtrl',
                    title : '關於我們'
                }
            }
        ];
    };
    
})();

(function(){
  'use strict';

  /**
  * app.register Module
  *
  * Description
  */
  angular
    .module('app.register')
    .controller('RegisterController',RegisterController);

    RegisterController.$inject = ['AccountService','$uibModalInstance'];

    function RegisterController(AccountService,$uibModalInstance){
      var vm = this; 
      vm.account = {};
      vm.submitAccount = submitAccount;
      vm.cancel = cancel; 

      function submitAccount(){
       
        AccountService.postAccount(vm.account).then(function(res){
          if (res) {
            $uibModalInstance.dismiss('cancel');
          };
        });
      };

      function cancel(){
        $uibModalInstance.dismiss('cancel');
      };
    };

})();
(function(){
  'use strict';
  
  /**
  * app.career Module
  *
  * Description
  */
  angular
    .module('landing.career')
    .run(appRun);

    appRun.$inject = ['routerHelper'];

    function appRun( routerHelper ){
      routerHelper.configureState(getStates());
    };

    function getStates(){
      return [
        {
          state: 'landing.careers',
          config: {
              templateUrl: 'panda-career.html',
              url: '/careers/:id',
              title : '職涯'
          }
        }
      ];
    };

})();
(function(){
  'use strict';
    /**
  * panadaApp Module
  *
  * Description
  */
  angular
    .module('landing.career')
    .controller('CareerController',CareerController);

    CareerController.$inject = [];

    function CareerController(){
      var vm = this; 
      // vm.careerId = $stateParams.id;
      console.log("it is career page");
    };

})();



(function(){
  'use strict';
  /**
  * landing.demo Module
  *
  * Description
  */
  angular
    .module('landing.demo')
    .run(appRun);

    appRun.$inject = ['routerHelper'];

    function appRun(routerHelper){
      routerHelper.configureState(getStates());
    };

   function getStates() {
        return [
            {
                state: 'landing.demo',
                config: {
                    templateUrl: 'panda-demo.html',
                    url: '/demo',
                    controller : 'DemoController',
                    controllerAs : 'DemoCtrl',
                    title : '演示'
                }
            }
        ];
    };


})();
(function(){
  'use strict';
  /**
  * landing.demo Module
  *
  * Description
  */
  angular
    .module('landing.demo')
    .controller('DemoController',DemoController);

    DemoController.$inject = [];

    function DemoController(){

    };

})();
(function(){
  /**
* app.home Module
*
* Description
*/
angular
  .module('landing.home')
  .controller('HomeController',HomeController)

  HomeController.$inject = ['AccountService'];

  function HomeController(AccountService){
    var vm = this;
    vm.account = {};
    vm.submit = submit;
    
    
    $(".headline").hide().animate({ left:"0px", opacity:"show"}, 1500);

    function submit(){
      return AccountService.postAccount(vm.account);
    };

  };

})();
(function(){
  'use strict';
  /**
  * landing.home Module
  *
  * Description
  */
  angular
    .module('landing.home')
    .run(appRun);

    /* @ngInject */

    appRun.$inject = ['routerHelper'];

    function appRun(routerHelper) {
        routerHelper.configureState(getStates(),'/');
    };

    function getStates() {
        return [
            {
                state: 'landing.home',
                config: {
                    templateUrl: 'panda-home.html',
                    url: '/',
                    controller : 'HomeController',
                    controllerAs : 'HomeCtrl',
                    title : '首頁'
                }
            }
        ];
    };

})();
(function(){
  'use strict';

  /**
  * app.navbar Module
  *
  * Description
  */
  angular
    .module('landing.navbar')
    .controller('NavbarController', NavbarController);

    NavbarController.$inject = ['$uibModal','$window','$scope'];

    function NavbarController($uibModal, $window,$scope){
      var vm = this; 
      vm.scroll = false;
      vm.text = "hello go go";
      vm.openRegisterModal = openRegisterModal; 

      function openRegisterModal() {
        return $uibModal.open({
          animation: true,
          templateUrl: 'register.modal.html',
          controller : 'RegisterController',
          controllerAs :'RegisterCtrl',
          size: 'md'
        });
      };

      $("#try").on("scrollstart",function(){
        alert("Started scrolling!");
      });

      // angular.element($window).bind("scroll", function(e) {
      //   $scope.$apply(function(){
      //     vm.scroll = true;
      //   })
      //   console.log("start to scroll") 
      // });


    };

})();
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImFwcC5tb2R1bGUuanMiLCJjb3Jlcy9jb3JlLm1vZHVsZS5qcyIsImxhbmRpbmcvbGFuZGluZy5tb2R1bGUuanMiLCJibG9jay9yb3V0ZXIvcm91dGVyLm1vZHVsZS5qcyIsImxhbmRpbmcvYWJvdXQvYWJvdXQubW9kdWxlLmpzIiwibW9kYWwvcmVnaXN0ZXIvcmVnaXN0ZXIubW9kdWxlLmpzIiwibGFuZGluZy9jYXJlZXIvY2FyZWVyLm1vZHVsZS5qcyIsImxhbmRpbmcvZGVtby9kZW1vLm1vZHVsZS5qcyIsImxhbmRpbmcvaG9tZS9ob21lLm1vZHVsZS5qcyIsImxhbmRpbmcvbmF2YmFyL25hdmJhci5tb2R1bGUuanMiLCJsYW5kaW5nL2xhbmRpbmcucm91dGVyLmpzIiwiYmxvY2svcm91dGVyL3JvdXRlci1oZWxwZXIucHJvdmlkZXIuanMiLCJjb3Jlcy9kYXRhU2VydmljZS9hY2NvdW50LnNlcnZpY2UuanMiLCJsYW5kaW5nL2Fib3V0L2Fib3V0LmN0cmwuanMiLCJsYW5kaW5nL2Fib3V0L2Fib3V0LnJvdXRlLmpzIiwibW9kYWwvcmVnaXN0ZXIvcmVnaXN0ZXIuY3RybC5qcyIsImxhbmRpbmcvY2FyZWVyL2NhcmVlci5yb3V0ZXIuanMiLCJsYW5kaW5nL2NhcmVlci9jYXJyZXIuY3RybC5qcyIsImxhbmRpbmcvZGVtby9kZW1vLnJvdXRlci5qcyIsImxhbmRpbmcvZGVtby9kZW1vbi5jdHJsLmpzIiwibGFuZGluZy9ob21lL2hvbWUuY3RybC5qcyIsImxhbmRpbmcvaG9tZS9ob21lLnJvdXRlLmpzIiwibGFuZGluZy9uYXZiYXIvbmF2YmFyLmN0cmwuanMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBQUEsQ0FBQSxVQUFBO0VBQ0E7Ozs7OztFQU1BLFFBQUEsT0FBQSxZQUFBO0lBQ0E7SUFDQTs7O0FDVEEsQ0FBQSxVQUFBO0VBQ0E7Ozs7OztFQU1BO0tBQ0EsT0FBQSxXQUFBO01BQ0E7TUFDQTs7O0FDVkEsQ0FBQSxVQUFBO0VBQ0E7Ozs7Ozs7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QUEsaUJBQUEsV0FBQSxRQUFBLE9BQUE7TUFDQSxJQUFBLEtBQUE7TUFDQSxHQUFBLFNBQUE7TUFDQSxHQUFBLE9BQUE7TUFDQSxHQUFBLG9CQUFBOztNQUVBLFNBQUEsb0JBQUE7UUFDQSxPQUFBLFVBQUEsS0FBQTtVQUNBLFdBQUE7VUFDQSxhQUFBO1VBQ0EsYUFBQTtVQUNBLGNBQUE7VUFDQSxNQUFBOztPQUVBOztNQUVBLEVBQUEsUUFBQSxHQUFBLGNBQUEsVUFBQTtRQUNBLE1BQUE7Ozs7Ozs7Ozs7O0tBV0E7O0tBRUEiLCJmaWxlIjoiYXBwLm1pbi5qcyIsInNvdXJjZXNDb250ZW50IjpbIihmdW5jdGlvbigpe1xuICAndXNlIHN0cmljdCc7XG4gICAgLyoqXG4gICogYXBwIE1vZHVsZVxuICAqXG4gICogRGVzY3JpcHRpb25cbiAgKi9cbiAgYW5ndWxhci5tb2R1bGUoJ3BhbmRhQXBwJywgW1xuICAgICdhcHAuY29yZScsXG4gICAgJ2FwcC5sYW5kaW5nJ1xuICBdKTtcbn0pKCk7IiwiKGZ1bmN0aW9uKCl7XG4gICd1c2Ugc3RyaWN0JztcbiAgLyoqXG4gICogYXBwLmNvcmUgTW9kdWxlXG4gICpcbiAgKiBEZXNjcmlwdGlvblxuICAqL1xuICBhbmd1bGFyXG4gICAgLm1vZHVsZSgnYXBwLmNvcmUnLFtcbiAgICAgICdibG9ja3Mucm91dGVyJyxcbiAgICAgICd1aS5yb3V0ZXInXG4gICAgICBdKVxufSkoKTsiLCIoZnVuY3Rpb24oKXtcbiAgJ3VzZSBzdHJpY3QnO1xuXG4gIC8qKlxuICAqIGFwcC5sYW5kaW5nIE1vZHVsZVxuICAqXG4gICogRGVzY3JpcHRpb25cbiAgKi9cbiAgYW5ndWxhci5tb2R1bGUoJ2FwcC5sYW5kaW5nJyxbXG4gICAgICAnYXBwLmNvcmUnLFxuICAgICAgJ2xhbmRpbmcuaG9tZScsXG4gICAgICAnbGFuZGluZy5hYm91dCcsXG4gICAgICAnbGFuZGluZy5jYXJlZXInLFxuICAgICAgJ2xhbmRpbmcuZGVtbycsXG4gICAgICAnbGFuZGluZy5uYXZiYXInXG4gICAgXSlcbn0pKCk7IiwiKGZ1bmN0aW9uKCl7XG4gICd1c2Ugc3RyaWN0JztcbiAvKipcbiAqIGJsb2Nrcy5yb3V0ZXIgTW9kdWxlXG4gKlxuICogRGVzY3JpcHRpb25cbiAqL1xuICBcbiAgYW5ndWxhci5tb2R1bGUoJ2Jsb2Nrcy5yb3V0ZXInLCBbXG4gICAgJ3VpLnJvdXRlcidcbiAgICBdKTtcbn0pKCk7IiwiKGZ1bmN0aW9uKCl7XG4gICd1c2Ugc3RyaWN0JztcbiAgLyoqXG4gICogYXBwLmFib3V0IE1vZHVsZVxuICAqXG4gICogRGVzY3JpcHRpb25cbiAgKi9cbiAgYW5ndWxhclxuICAgIC5tb2R1bGUoJ2xhbmRpbmcuYWJvdXQnLCBbXG4gICAgICAnYXBwLmNvcmUnXG4gICAgXSlcbn0pKCk7IiwiKGZ1bmN0aW9uKCl7XG4gICd1c2Ugc3RyaWN0JztcblxuICAvKipcbiAgKiBhcHAucmVnaXN0ZXIgTW9kdWxlXG4gICpcbiAgKiBEZXNjcmlwdGlvblxuICAqL1xuICBhbmd1bGFyXG4gICAgLm1vZHVsZSgnYXBwLnJlZ2lzdGVyJywgW1xuICAgICAgJ3VpLmJvb3RzdHJhcCdcbiAgICBdKTtcbn0pKCk7IiwiKGZ1bmN0aW9uKCl7XG4gICd1c2Ugc3RyaWN0JztcbiAgLyoqXG4gICogYXBwLmNhcmVlciBNb2R1bGVcbiAgKlxuICAqIERlc2NyaXB0aW9uXG4gICovXG4gIGFuZ3VsYXJcbiAgICAubW9kdWxlKCdsYW5kaW5nLmNhcmVlcicsW1xuICAgICAgJ2FwcC5jb3JlJyxcbiAgICAgICd1aS5yb3V0ZXInXG4gICAgXSk7XG59KSgpOyIsIihmdW5jdGlvbigpe1xuICAndXNlIHN0cmljdCc7XG5cbiAgLyoqXG4gICogbGFuZGluZy5kZW1vIE1vZHVsZVxuICAqXG4gICogRGVzY3JpcHRpb25cbiAgKi9cbiAgYW5ndWxhclxuICAgIC5tb2R1bGUoJ2xhbmRpbmcuZGVtbycsIFtdKTtcbn0pKCk7IiwiKGZ1bmN0aW9uKCl7XG4gIC8qKlxuICAqIGFwcC5wYW5kYS1ob21lIE1vZHVsZVxuICAqXG4gICogRGVzY3JpcHRpb25cbiAgKi9cbiAgYW5ndWxhclxuICAgIC5tb2R1bGUoJ2xhbmRpbmcuaG9tZScsW1xuICAgICAgJ2FwcC5jb3JlJ1xuICAgIF0pXG5cbn0pKCk7IiwiKGZ1bmN0aW9uKCl7XG4gICd1c2Ugc3RyaWN0JztcbiAgLyoqXG4gICogYXBwLm5hdmJhciBNb2R1bGVcbiAgKlxuICAqIERlc2NyaXB0aW9uXG4gICovXG4gIGFuZ3VsYXJcbiAgICAubW9kdWxlKCdsYW5kaW5nLm5hdmJhcicsIFtcbiAgICAgICd1aS5ib290c3RyYXAnLFxuICAgICAgJ2FwcC5yZWdpc3RlcidcbiAgICBdKTtcbn0pKCk7IiwiKGZ1bmN0aW9uKCl7XG4gICd1c2Ugc3RyaWN0JztcbiAgLyoqXG4gICogYXBwLmxhbmRpbmcgTW9kdWxlXG4gICpcbiAgKiBEZXNjcmlwdGlvblxuICAqL1xuICAgIGFuZ3VsYXJcbiAgICAubW9kdWxlKCdhcHAubGFuZGluZycpXG4gICAgLnJ1bihhcHBSdW4pO1xuXG4gICAgYXBwUnVuLiRpbmplY3QgPSBbJ3JvdXRlckhlbHBlciddO1xuXG4gICAgZnVuY3Rpb24gYXBwUnVuKCByb3V0ZXJIZWxwZXIgKXtcbiAgICAgIHJvdXRlckhlbHBlci5jb25maWd1cmVTdGF0ZShnZXRTdGF0ZXMoKSk7XG4gICAgfTtcblxuICAgIGZ1bmN0aW9uIGdldFN0YXRlcygpe1xuICAgICAgcmV0dXJuIFtcbiAgICAgICAge1xuICAgICAgICAgIHN0YXRlOiAnbGFuZGluZycsXG4gICAgICAgICAgY29uZmlnOiB7XG4gICAgICAgICAgICAgIGFic3RyYWN0IDogdHJ1ZSxcbiAgICAgICAgICAgICAgdGVtcGxhdGVVcmw6ICcuL2NvbW1vbi9jb250ZW50Lmh0bWwnXG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICBdO1xuICAgIH07XG59KSgpOyIsIihmdW5jdGlvbigpe1xuICAndXNlIHN0cmljdCc7XG5cbiAgLyoqXG4gICogYmxvY2tzLnJvdXRlciBNb2R1bGVcbiAgKlxuICAqIERlc2NyaXB0aW9uXG4gICovXG4gIGFuZ3VsYXJcbiAgICAubW9kdWxlKCdibG9ja3Mucm91dGVyJylcbiAgICAucHJvdmlkZXIoJ3JvdXRlckhlbHBlcicscm91dGVySGVscGVyUHJvdmlkZXIpO1xuXG4gICAgcm91dGVySGVscGVyUHJvdmlkZXIuJGluamVjdCA9IFsnJGxvY2F0aW9uUHJvdmlkZXInLCckc3RhdGVQcm92aWRlcicsJyR1cmxSb3V0ZXJQcm92aWRlciddO1xuXG4gIGZ1bmN0aW9uIHJvdXRlckhlbHBlclByb3ZpZGVyKCRsb2NhdGlvblByb3ZpZGVyLCRzdGF0ZVByb3ZpZGVyLCR1cmxSb3V0ZXJQcm92aWRlcil7XG5cbiAgICB2YXIgY29uZmlnID0ge1xuICAgICAgZG9jVGl0bGUgOiAn5oiQ6ZW354aK6LKTJ1xuICAgIH1cblxuICAgIC8vICRsb2NhdGlvblByb3ZpZGVyLmh0bWw1TW9kZSh7XG4gICAgLy8gICBlbmFibGVkOiB0cnVlLFxuICAgIC8vICAgcmVxdWlyZUJhc2U6IGZhbHNlXG4gICAgLy8gfSk7XG5cbiAgICB0aGlzLiRnZXQgPSBSb3V0ZXJIZWxwZXI7XG5cbiAgICBSb3V0ZXJIZWxwZXIuJGluamVjdCA9IFsnJHN0YXRlJywnJHJvb3RTY29wZSddO1xuXG4gICAgZnVuY3Rpb24gUm91dGVySGVscGVyKCRzdGF0ZSwgJHJvb3RTY29wZSl7XG4gICAgICB2YXIgaGFzT3RoZXJ3aXNlID0gZmFsc2U7IFxuXG4gICAgICB2YXIgc2VydmljZSA9IHtcbiAgICAgICAgY29uZmlndXJlU3RhdGUgOiBjb25maWd1cmVTdGF0ZSxcbiAgICAgICAgZ2V0U3RhdGVzIDogZ2V0U3RhdGVzXG4gICAgICB9O1xuXG4gICAgICBpbml0KCk7XG5cbiAgICAgIHJldHVybiBzZXJ2aWNlO1xuXG4gICAgICBmdW5jdGlvbiBjb25maWd1cmVTdGF0ZShzdGF0ZXMsIG90aGVyd2lzZVBhdGgpe1xuICAgICAgICBzdGF0ZXMuZm9yRWFjaChmdW5jdGlvbihzdGF0ZSl7XG4gICAgICAgICAgJHN0YXRlUHJvdmlkZXIuc3RhdGUoc3RhdGUuc3RhdGUsc3RhdGUuY29uZmlnKTtcbiAgICAgICAgfSk7XG5cbiAgICAgICAgaWYgKCBvdGhlcndpc2VQYXRoICYmICFoYXNPdGhlcndpc2UpIHtcbiAgICAgICAgICBoYXNPdGhlcndpc2UgPSB0cnVlOyBcbiAgICAgICAgICAkdXJsUm91dGVyUHJvdmlkZXIub3RoZXJ3aXNlKG90aGVyd2lzZVBhdGgpO1xuICAgICAgICB9O1xuICAgICAgfTtcbiAgICAgIGZ1bmN0aW9uIGdldFN0YXRlcygpeyByZXR1cm4gJHN0YXRlLmdldCgpfTtcblxuICAgICAgZnVuY3Rpb24gaW5pdCgpe1xuICAgICAgICB1cGRhdGVEb2NUaXRsZSgpO1xuICAgICAgfTtcblxuICAgICAgZnVuY3Rpb24gdXBkYXRlRG9jVGl0bGUoKXtcbiAgICAgICAgJHJvb3RTY29wZS4kb24oJyRzdGF0ZUNoYW5nZVN1Y2Nlc3MnLFxuICAgICAgICAgIGZ1bmN0aW9uKGV2ZW50LCB0b1N0YXRlLCB0b1BhcmFtcywgZnJvbVN0YXRlLCBmcm9tUGFyYW1zKXtcbiAgICAgICAgICAgIHZhciB0aXRsZSA9IGNvbmZpZy5kb2NUaXRsZSArICcgfCAnICsgKHRvU3RhdGUudGl0bGUgfHwgJycpO1xuICAgICAgICAgICAgJHJvb3RTY29wZS50aXRsZSA9IHRpdGxlO1xuICAgICAgICAgIH0pO1xuICAgICAgfVxuICAgIFxuICAgIH07XG4gIH07XG5cbn0pKCk7XG4iLCIoZnVuY3Rpb24oKXtcbiAgJ3VzZSBzdHJpY3QnO1xuICAvKipcbiAgKiBhcHAuY29yZSBNb2R1bGVcbiAgKlxuICAqIERlc2NyaXB0aW9uXG4gICovXG4gIGFuZ3VsYXJcbiAgICAubW9kdWxlKCdhcHAuY29yZScpXG4gICAgLmZhY3RvcnkoJ0FjY291bnRTZXJ2aWNlJyxBY2NvdW50U2VydmljZSk7XG5cbiAgICBBY2NvdW50U2VydmljZS4kaW5qZWN0ID0gWyckaHR0cCddO1xuXG4gICAgZnVuY3Rpb24gQWNjb3VudFNlcnZpY2UoJGh0dHApe1xuICAgICAgICByZXR1cm4ge1xuICAgICAgICAgIHBvc3RBY2NvdW50IDogcG9zdEFjY291bnRcbiAgICAgICAgfTtcblxuICAgICAgICBmdW5jdGlvbiBwb3N0QWNjb3VudChhY2NvdW50KXtcbiAgICAgICAgICByZXR1cm4gJGh0dHAucG9zdCgnL2FwaS9hY2NvdW50cycsIGFjY291bnQpXG4gICAgICAgICAgICAgICAgICAudGhlbihwb3N0U3VjY2VzcylcbiAgICAgICAgICAgICAgICAgIC5jYXRjaChwb3N0RmFpbGVkKTtcblxuICAgICAgICAgIGZ1bmN0aW9uIHBvc3RTdWNjZXNzKHJlcyl7XG4gICAgICAgICAgICByZXR1cm4gcmVzLmRhdGE7XG4gICAgICAgICAgfTtcblxuICAgICAgICAgIGZ1bmN0aW9uIHBvc3RGYWlsZWQocmVzKXtcbiAgICAgICAgICAgIHJldHVybiBjb25zb2xlLmxvZyhyZXMpO1xuICAgICAgICAgIH07XG5cbiAgICAgICAgfTsgXG4gICAgfTtcblxufSkoKTsiLCIoZnVuY3Rpb24oKXtcbiAgJ3VzZSBzdHJpY3QnO1xuICAvKipcbiogcGFuZGFBcHAgTW9kdWxlXG4qXG4qIERlc2NyaXB0aW9uXG4qL1xuYW5ndWxhclxuICAubW9kdWxlKCdsYW5kaW5nLmFib3V0JylcbiAgLmNvbnRyb2xsZXIoJ0Fib3V0Q29udHJvbGxlcicsQWJvdXRDb250cm9sbGVyKVxuXG4gIEFib3V0Q29udHJvbGxlci4kaW5qZWN0ID0gWyckcm9vdFNjb3BlJ107XG5cbiAgZnVuY3Rpb24gQWJvdXRDb250cm9sbGVyKCRyb290U2NvcGUpe1xuICAgIHZhciB2bSA9IHRoaXM7IFxuICAgIHZhciB0b3AgPSAkKFwiI2NhcmVlclwiKS5vZmZzZXQoKS50b3AgIC0gMy41KnBhcnNlRmxvYXQoJCgnI2NhcmVlcicpLmNzcygnbWFyZ2luVG9wJykucmVwbGFjZSgvYXV0by8sMCkpO1xuICAgICQoJyNqb2ludXMnKS5jbGljayhmdW5jdGlvbiAoKSB7XG4gICAgICAgICQoJ2h0bWwsYm9keScpLmFuaW1hdGUoe3Njcm9sbFRvcDp0b3B9LCA1MDApO1xuICAgIH0pO1xuXG4gIH07XG5cbn0pKCk7XG4iLCIoZnVuY3Rpb24oKXtcbiAgJ3VzZSBzdHJpY3QnO1xuXG4gIC8qKlxuICAqIGFwcC5ob21lIE1vZHVsZVxuICAqXG4gICogRGVzY3JpcHRpb25cbiAgKi9cbiAgYW5ndWxhclxuICAgIC5tb2R1bGUoJ2xhbmRpbmcuYWJvdXQnKVxuICAgIC5ydW4oYXBwUnVuKTtcblxuICAgIGFwcFJ1bi4kaW5qZWN0ID0gWydyb3V0ZXJIZWxwZXInXTtcblxuICAgIGZ1bmN0aW9uIGFwcFJ1biggcm91dGVySGVscGVyICl7XG4gICAgICByb3V0ZXJIZWxwZXIuY29uZmlndXJlU3RhdGUoZ2V0U3RhdGVzKCkpO1xuICAgIH1cblxuICAgIGZ1bmN0aW9uIGdldFN0YXRlcygpIHtcbiAgICAgICAgcmV0dXJuIFtcbiAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICBzdGF0ZTogJ2xhbmRpbmcuYWJvdXQnLFxuICAgICAgICAgICAgICAgIGNvbmZpZzoge1xuICAgICAgICAgICAgICAgICAgICB0ZW1wbGF0ZVVybDogJ3BhbmRhLWFib3V0Lmh0bWwnLFxuICAgICAgICAgICAgICAgICAgICB1cmw6ICcvYWJvdXQnLFxuICAgICAgICAgICAgICAgICAgICBjb250cm9sbGVyIDogJ0Fib3V0Q29udHJvbGxlcicsXG4gICAgICAgICAgICAgICAgICAgIGNvbnRyb2xsZXJBcyA6ICdBYm91dEN0cmwnLFxuICAgICAgICAgICAgICAgICAgICB0aXRsZSA6ICfpl5zmlrzmiJHlgJEnXG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICBdO1xuICAgIH07XG4gICAgXG59KSgpO1xuIiwiKGZ1bmN0aW9uKCl7XG4gICd1c2Ugc3RyaWN0JztcblxuICAvKipcbiAgKiBhcHAucmVnaXN0ZXIgTW9kdWxlXG4gICpcbiAgKiBEZXNjcmlwdGlvblxuICAqL1xuICBhbmd1bGFyXG4gICAgLm1vZHVsZSgnYXBwLnJlZ2lzdGVyJylcbiAgICAuY29udHJvbGxlcignUmVnaXN0ZXJDb250cm9sbGVyJyxSZWdpc3RlckNvbnRyb2xsZXIpO1xuXG4gICAgUmVnaXN0ZXJDb250cm9sbGVyLiRpbmplY3QgPSBbJ0FjY291bnRTZXJ2aWNlJywnJHVpYk1vZGFsSW5zdGFuY2UnXTtcblxuICAgIGZ1bmN0aW9uIFJlZ2lzdGVyQ29udHJvbGxlcihBY2NvdW50U2VydmljZSwkdWliTW9kYWxJbnN0YW5jZSl7XG4gICAgICB2YXIgdm0gPSB0aGlzOyBcbiAgICAgIHZtLmFjY291bnQgPSB7fTtcbiAgICAgIHZtLnN1Ym1pdEFjY291bnQgPSBzdWJtaXRBY2NvdW50O1xuICAgICAgdm0uY2FuY2VsID0gY2FuY2VsOyBcblxuICAgICAgZnVuY3Rpb24gc3VibWl0QWNjb3VudCgpe1xuICAgICAgIFxuICAgICAgICBBY2NvdW50U2VydmljZS5wb3N0QWNjb3VudCh2bS5hY2NvdW50KS50aGVuKGZ1bmN0aW9uKHJlcyl7XG4gICAgICAgICAgaWYgKHJlcykge1xuICAgICAgICAgICAgJHVpYk1vZGFsSW5zdGFuY2UuZGlzbWlzcygnY2FuY2VsJyk7XG4gICAgICAgICAgfTtcbiAgICAgICAgfSk7XG4gICAgICB9O1xuXG4gICAgICBmdW5jdGlvbiBjYW5jZWwoKXtcbiAgICAgICAgJHVpYk1vZGFsSW5zdGFuY2UuZGlzbWlzcygnY2FuY2VsJyk7XG4gICAgICB9O1xuICAgIH07XG5cbn0pKCk7IiwiKGZ1bmN0aW9uKCl7XG4gICd1c2Ugc3RyaWN0JztcbiAgXG4gIC8qKlxuICAqIGFwcC5jYXJlZXIgTW9kdWxlXG4gICpcbiAgKiBEZXNjcmlwdGlvblxuICAqL1xuICBhbmd1bGFyXG4gICAgLm1vZHVsZSgnbGFuZGluZy5jYXJlZXInKVxuICAgIC5ydW4oYXBwUnVuKTtcblxuICAgIGFwcFJ1bi4kaW5qZWN0ID0gWydyb3V0ZXJIZWxwZXInXTtcblxuICAgIGZ1bmN0aW9uIGFwcFJ1biggcm91dGVySGVscGVyICl7XG4gICAgICByb3V0ZXJIZWxwZXIuY29uZmlndXJlU3RhdGUoZ2V0U3RhdGVzKCkpO1xuICAgIH07XG5cbiAgICBmdW5jdGlvbiBnZXRTdGF0ZXMoKXtcbiAgICAgIHJldHVybiBbXG4gICAgICAgIHtcbiAgICAgICAgICBzdGF0ZTogJ2xhbmRpbmcuY2FyZWVycycsXG4gICAgICAgICAgY29uZmlnOiB7XG4gICAgICAgICAgICAgIHRlbXBsYXRlVXJsOiAncGFuZGEtY2FyZWVyLmh0bWwnLFxuICAgICAgICAgICAgICB1cmw6ICcvY2FyZWVycy86aWQnLFxuICAgICAgICAgICAgICB0aXRsZSA6ICfogbfmtq8nXG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICBdO1xuICAgIH07XG5cbn0pKCk7IiwiKGZ1bmN0aW9uKCl7XG4gICd1c2Ugc3RyaWN0JztcbiAgICAvKipcbiAgKiBwYW5hZGFBcHAgTW9kdWxlXG4gICpcbiAgKiBEZXNjcmlwdGlvblxuICAqL1xuICBhbmd1bGFyXG4gICAgLm1vZHVsZSgnbGFuZGluZy5jYXJlZXInKVxuICAgIC5jb250cm9sbGVyKCdDYXJlZXJDb250cm9sbGVyJyxDYXJlZXJDb250cm9sbGVyKTtcblxuICAgIENhcmVlckNvbnRyb2xsZXIuJGluamVjdCA9IFtdO1xuXG4gICAgZnVuY3Rpb24gQ2FyZWVyQ29udHJvbGxlcigpe1xuICAgICAgdmFyIHZtID0gdGhpczsgXG4gICAgICAvLyB2bS5jYXJlZXJJZCA9ICRzdGF0ZVBhcmFtcy5pZDtcbiAgICAgIGNvbnNvbGUubG9nKFwiaXQgaXMgY2FyZWVyIHBhZ2VcIik7XG4gICAgfTtcblxufSkoKTtcblxuXG4iLCIoZnVuY3Rpb24oKXtcbiAgJ3VzZSBzdHJpY3QnO1xuICAvKipcbiAgKiBsYW5kaW5nLmRlbW8gTW9kdWxlXG4gICpcbiAgKiBEZXNjcmlwdGlvblxuICAqL1xuICBhbmd1bGFyXG4gICAgLm1vZHVsZSgnbGFuZGluZy5kZW1vJylcbiAgICAucnVuKGFwcFJ1bik7XG5cbiAgICBhcHBSdW4uJGluamVjdCA9IFsncm91dGVySGVscGVyJ107XG5cbiAgICBmdW5jdGlvbiBhcHBSdW4ocm91dGVySGVscGVyKXtcbiAgICAgIHJvdXRlckhlbHBlci5jb25maWd1cmVTdGF0ZShnZXRTdGF0ZXMoKSk7XG4gICAgfTtcblxuICAgZnVuY3Rpb24gZ2V0U3RhdGVzKCkge1xuICAgICAgICByZXR1cm4gW1xuICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgIHN0YXRlOiAnbGFuZGluZy5kZW1vJyxcbiAgICAgICAgICAgICAgICBjb25maWc6IHtcbiAgICAgICAgICAgICAgICAgICAgdGVtcGxhdGVVcmw6ICdwYW5kYS1kZW1vLmh0bWwnLFxuICAgICAgICAgICAgICAgICAgICB1cmw6ICcvZGVtbycsXG4gICAgICAgICAgICAgICAgICAgIGNvbnRyb2xsZXIgOiAnRGVtb0NvbnRyb2xsZXInLFxuICAgICAgICAgICAgICAgICAgICBjb250cm9sbGVyQXMgOiAnRGVtb0N0cmwnLFxuICAgICAgICAgICAgICAgICAgICB0aXRsZSA6ICfmvJTnpLonXG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICBdO1xuICAgIH07XG5cblxufSkoKTsiLCIoZnVuY3Rpb24oKXtcbiAgJ3VzZSBzdHJpY3QnO1xuICAvKipcbiAgKiBsYW5kaW5nLmRlbW8gTW9kdWxlXG4gICpcbiAgKiBEZXNjcmlwdGlvblxuICAqL1xuICBhbmd1bGFyXG4gICAgLm1vZHVsZSgnbGFuZGluZy5kZW1vJylcbiAgICAuY29udHJvbGxlcignRGVtb0NvbnRyb2xsZXInLERlbW9Db250cm9sbGVyKTtcblxuICAgIERlbW9Db250cm9sbGVyLiRpbmplY3QgPSBbXTtcblxuICAgIGZ1bmN0aW9uIERlbW9Db250cm9sbGVyKCl7XG5cbiAgICB9O1xuXG59KSgpOyIsIihmdW5jdGlvbigpe1xuICAvKipcbiogYXBwLmhvbWUgTW9kdWxlXG4qXG4qIERlc2NyaXB0aW9uXG4qL1xuYW5ndWxhclxuICAubW9kdWxlKCdsYW5kaW5nLmhvbWUnKVxuICAuY29udHJvbGxlcignSG9tZUNvbnRyb2xsZXInLEhvbWVDb250cm9sbGVyKVxuXG4gIEhvbWVDb250cm9sbGVyLiRpbmplY3QgPSBbJ0FjY291bnRTZXJ2aWNlJ107XG5cbiAgZnVuY3Rpb24gSG9tZUNvbnRyb2xsZXIoQWNjb3VudFNlcnZpY2Upe1xuICAgIHZhciB2bSA9IHRoaXM7XG4gICAgdm0uYWNjb3VudCA9IHt9O1xuICAgIHZtLnN1Ym1pdCA9IHN1Ym1pdDtcbiAgICBcbiAgICBcbiAgICAkKFwiLmhlYWRsaW5lXCIpLmhpZGUoKS5hbmltYXRlKHsgbGVmdDpcIjBweFwiLCBvcGFjaXR5Olwic2hvd1wifSwgMTUwMCk7XG5cbiAgICBmdW5jdGlvbiBzdWJtaXQoKXtcbiAgICAgIHJldHVybiBBY2NvdW50U2VydmljZS5wb3N0QWNjb3VudCh2bS5hY2NvdW50KTtcbiAgICB9O1xuXG4gIH07XG5cbn0pKCk7IiwiKGZ1bmN0aW9uKCl7XG4gICd1c2Ugc3RyaWN0JztcbiAgLyoqXG4gICogbGFuZGluZy5ob21lIE1vZHVsZVxuICAqXG4gICogRGVzY3JpcHRpb25cbiAgKi9cbiAgYW5ndWxhclxuICAgIC5tb2R1bGUoJ2xhbmRpbmcuaG9tZScpXG4gICAgLnJ1bihhcHBSdW4pO1xuXG4gICAgLyogQG5nSW5qZWN0ICovXG5cbiAgICBhcHBSdW4uJGluamVjdCA9IFsncm91dGVySGVscGVyJ107XG5cbiAgICBmdW5jdGlvbiBhcHBSdW4ocm91dGVySGVscGVyKSB7XG4gICAgICAgIHJvdXRlckhlbHBlci5jb25maWd1cmVTdGF0ZShnZXRTdGF0ZXMoKSwnLycpO1xuICAgIH07XG5cbiAgICBmdW5jdGlvbiBnZXRTdGF0ZXMoKSB7XG4gICAgICAgIHJldHVybiBbXG4gICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgc3RhdGU6ICdsYW5kaW5nLmhvbWUnLFxuICAgICAgICAgICAgICAgIGNvbmZpZzoge1xuICAgICAgICAgICAgICAgICAgICB0ZW1wbGF0ZVVybDogJ3BhbmRhLWhvbWUuaHRtbCcsXG4gICAgICAgICAgICAgICAgICAgIHVybDogJy8nLFxuICAgICAgICAgICAgICAgICAgICBjb250cm9sbGVyIDogJ0hvbWVDb250cm9sbGVyJyxcbiAgICAgICAgICAgICAgICAgICAgY29udHJvbGxlckFzIDogJ0hvbWVDdHJsJyxcbiAgICAgICAgICAgICAgICAgICAgdGl0bGUgOiAn6aaW6aCBJ1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgXTtcbiAgICB9O1xuXG59KSgpOyIsIihmdW5jdGlvbigpe1xuICAndXNlIHN0cmljdCc7XG5cbiAgLyoqXG4gICogYXBwLm5hdmJhciBNb2R1bGVcbiAgKlxuICAqIERlc2NyaXB0aW9uXG4gICovXG4gIGFuZ3VsYXJcbiAgICAubW9kdWxlKCdsYW5kaW5nLm5hdmJhcicpXG4gICAgLmNvbnRyb2xsZXIoJ05hdmJhckNvbnRyb2xsZXInLCBOYXZiYXJDb250cm9sbGVyKTtcblxuICAgIE5hdmJhckNvbnRyb2xsZXIuJGluamVjdCA9IFsnJHVpYk1vZGFsJywnJHdpbmRvdycsJyRzY29wZSddO1xuXG4gICAgZnVuY3Rpb24gTmF2YmFyQ29udHJvbGxlcigkdWliTW9kYWwsICR3aW5kb3csJHNjb3BlKXtcbiAgICAgIHZhciB2bSA9IHRoaXM7IFxuICAgICAgdm0uc2Nyb2xsID0gZmFsc2U7XG4gICAgICB2bS50ZXh0ID0gXCJoZWxsbyBnbyBnb1wiO1xuICAgICAgdm0ub3BlblJlZ2lzdGVyTW9kYWwgPSBvcGVuUmVnaXN0ZXJNb2RhbDsgXG5cbiAgICAgIGZ1bmN0aW9uIG9wZW5SZWdpc3Rlck1vZGFsKCkge1xuICAgICAgICByZXR1cm4gJHVpYk1vZGFsLm9wZW4oe1xuICAgICAgICAgIGFuaW1hdGlvbjogdHJ1ZSxcbiAgICAgICAgICB0ZW1wbGF0ZVVybDogJ3JlZ2lzdGVyLm1vZGFsLmh0bWwnLFxuICAgICAgICAgIGNvbnRyb2xsZXIgOiAnUmVnaXN0ZXJDb250cm9sbGVyJyxcbiAgICAgICAgICBjb250cm9sbGVyQXMgOidSZWdpc3RlckN0cmwnLFxuICAgICAgICAgIHNpemU6ICdtZCdcbiAgICAgICAgfSk7XG4gICAgICB9O1xuXG4gICAgICAkKFwiI3RyeVwiKS5vbihcInNjcm9sbHN0YXJ0XCIsZnVuY3Rpb24oKXtcbiAgICAgICAgYWxlcnQoXCJTdGFydGVkIHNjcm9sbGluZyFcIik7XG4gICAgICB9KTtcblxuICAgICAgLy8gYW5ndWxhci5lbGVtZW50KCR3aW5kb3cpLmJpbmQoXCJzY3JvbGxcIiwgZnVuY3Rpb24oZSkge1xuICAgICAgLy8gICAkc2NvcGUuJGFwcGx5KGZ1bmN0aW9uKCl7XG4gICAgICAvLyAgICAgdm0uc2Nyb2xsID0gdHJ1ZTtcbiAgICAgIC8vICAgfSlcbiAgICAgIC8vICAgY29uc29sZS5sb2coXCJzdGFydCB0byBzY3JvbGxcIikgXG4gICAgICAvLyB9KTtcblxuXG4gICAgfTtcblxufSkoKTsiXSwic291cmNlUm9vdCI6Ii9zb3VyY2UvIn0=
