(function(){
  'use strict';
    /**
  * app Module
  *
  * Description
  */
  angular.module('pandaApp', [
    'app.core',
    'app.landing',
    'app.demo',
    'app.signup',
    'pascalprecht.translate'
  ]);
})();
(function(){
  'use strict';
  /**
  * app.core Module
  *
  * Description
  */
  angular
    .module('app.core',[
      'blocks.router',
      'ui.router'
      ])
})();
(function(){
  'use strict';

  /**
  * landing.demo Module
  *
  * Description
  */
  angular
    .module('app.demo', []);
})();
(function(){
  'use strict';

  /**
  * app.landing Module
  *
  * Description
  */
  angular.module('app.landing',[
      'app.core',
      'landing.home',
      'landing.about',
      'landing.career',
      'landing.navbar',
      'landing.feature',
     
    ])
})();
(function(){
  'use strict';
  /**
  * landing.signup Module
  *
  * Description
  */
  angular
    .module('app.signup', []);
})();
(function(){
  'use strict';
 /**
 * blocks.router Module
 *
 * Description
 */
  
  angular.module('blocks.router', [
    'ui.router'
    ]);
})();
(function(){
  'use strict';
  /**
  * landing.about Module
  *
  * Description
  */
  angular
    .module('landing.about', [
      'app.core'
    ])
})();
(function(){
  'use strict';
  /**
  * app.career Module
  *
  * Description
  */
  angular
    .module('landing.career',[
      'app.core',
      'ui.router'
    ]);
})();
(function(){
  'use strict';
  /**
  * landing.feature Module
  *
  * Description
  */
  angular
    .module('landing.feature', [])
})();
(function(){
  /**
  * app.panda-home Module
  *
  * Description
  */
  angular
    .module('landing.home',[
      'app.core'
    ])

})();
(function(){
  'use strict';
  /**
  * landing.navbar Module
  *
  * Description
  */
  angular
    .module('landing.navbar', [
      'ui.bootstrap',
      'app.register'
    ]);
})();
(function(){
  'use strict';

  /**
  * app.register Module
  *
  * Description
  */
  angular
    .module('app.register', [
      'ui.bootstrap'
    ]);
})();
(function(){
  'use strict';
  /**
  * app Module
  *
  * Description
  */
  angular
    .module('pandaApp')
    .config(appConfig);

    appConfig.$inject = ['$translateProvider'];

    function appConfig($translateProvider){
      $translateProvider.translations('en', {
        TITLE: 'MarketPanda'
      });

      $translateProvider.translations('zh-t',{
        TITLE: '市場熊貓'
      });

      $translateProvider.translations('zh-s',{
        TITLE: '市场熊猫'
      });
    };

})();
(function(){
  'use strict';
  /**
  * landing.demo Module
  *
  * Description
  */
  angular
    .module('app.demo')
    .run(appRun);

    appRun.$inject = ['routerHelper'];

    function appRun(routerHelper){
      routerHelper.configureState(getStates());
    };

   function getStates() {
        return [
            {
                state: 'demo',
                config: {
                    templateUrl: 'panda-demo.html',
                    url: '/demo',
                    controller : 'DemoController',
                    controllerAs : 'DemoCtrl',
                    title : '演示'
                }
            }
        ];
    };


})();
(function(){
  'use strict';
  /**
  * landing.demo Module
  *
  * Description
  */
  angular
    .module('app.demo')
    .controller('DemoController',DemoController);

    DemoController.$inject = [];

    function DemoController(){

    };

})();
(function(){
  'use strict';
  /**
  * app.landing Module
  *
  * Description
  */
    angular
    .module('app.landing')
    .run(appRun);

    appRun.$inject = ['routerHelper'];

    function appRun( routerHelper ){
      routerHelper.configureState(getStates());
    };

    function getStates(){
      return [
        {
          state: 'landing',
          config: {
              abstract : true,
              templateUrl: './common/content.html'
          }
        }
      ];
    };
})();
(function(){
  'use strict';

  /**
  * landing.signup Module
  *
  * Description
  */
  angular
    .module('app.signup')
    .controller('SignupController',SignupController);

    SignupController.$inject = ['AccountService'];

    function SignupController(AccountService){

    };
})();
(function(){
  'use strict';
  /**
  * landing.signup Module
  *
  * Description
  */

  angular
    .module('app.signup')
    .run(appRun);

    appRun.$inject = ['routerHelper'];

    function appRun( routerHelper ){
      routerHelper.configureState(getStates());
    };

    function getStates() {
        return [
            {
                state: 'signup',
                config: {
                    templateUrl: 'panda-signup.html',
                    url: '/signup',
                    controller : 'SignupController',
                    controllerAs : 'SignupCtrl',
                    title : '註冊'
                }
            }
        ];
    };

})();
(function(){
  'use strict';

  /**
  * blocks.router Module
  *
  * Description
  */
  angular
    .module('blocks.router')
    .provider('routerHelper',routerHelperProvider);

    routerHelperProvider.$inject = ['$locationProvider','$stateProvider','$urlRouterProvider'];

  function routerHelperProvider($locationProvider,$stateProvider,$urlRouterProvider){

    var config = {
      docTitle : '成長熊貓'
    }

    // $locationProvider.html5Mode({
    //   enabled: true,
    //   requireBase: false
    // });

    this.$get = RouterHelper;

    RouterHelper.$inject = ['$state','$rootScope'];

    function RouterHelper($state, $rootScope){
      var hasOtherwise = false; 

      var service = {
        configureState : configureState,
        getStates : getStates
      };

      init();

      return service;

      function configureState(states, otherwisePath){
        states.forEach(function(state){
          $stateProvider.state(state.state,state.config);
        });

        if ( otherwisePath && !hasOtherwise) {
          hasOtherwise = true; 
          $urlRouterProvider.otherwise(otherwisePath);
        };
      };
      function getStates(){ return $state.get()};

      function init(){
        updateDocTitle();
      };

      function updateDocTitle(){
        $rootScope.$on('$stateChangeSuccess',
          function(event, toState, toParams, fromState, fromParams){
            var title = config.docTitle + ' | ' + (toState.title || '');
            document.body.scrollTop = document.documentElement.scrollTop = 0;
            $rootScope.title = title;
          });
      };
    };
  };

})();

(function(){
  'use strict';
  /**
  * app.core Module
  *
  * Description
  */
  angular
    .module('app.core')
    .factory('AccountService',AccountService);

    AccountService.$inject = ['$http'];

    function AccountService($http){
        return {
          postAccount : postAccount
        };

        function postAccount(account){
          return $http.post('/api/accounts', account)
                  .then(postSuccess)
                  .catch(postFailed);

          function postSuccess(res){
            return res.data;
          };

          function postFailed(res){
            return console.log(res);
          };

        }; 
    };

})();
(function(){
  'use strict';
  /**
* landing.about Module
*
* Description
*/
angular
  .module('landing.about')
  .controller('AboutController',AboutController)

  AboutController.$inject = ['$rootScope'];

  function AboutController($rootScope){
    var vm = this; 
    var top = $("#career").offset().top  - 3.5*parseFloat($('#career').css('marginTop').replace(/auto/,0));
    $('#joinus').click(function () {
        $('html,body').animate({scrollTop:top}, 500);
    });

  };

})();

(function(){
  'use strict';

  /**
  * landing.home Module
  *
  * Description
  */
  angular
    .module('landing.about')
    .run(appRun);

    appRun.$inject = ['routerHelper'];

    function appRun( routerHelper ){
      routerHelper.configureState(getStates());
    }

    function getStates() {
        return [
            {
                state: 'landing.about',
                config: {
                    templateUrl: 'panda-about.html',
                    url: '/about',
                    controller : 'AboutController',
                    controllerAs : 'AboutCtrl',
                    title : '關於我們'
                }
            }
        ];
    };
    
})();

(function(){
  'use strict';
  
  /**
  * app.career Module
  *
  * Description
  */
  angular
    .module('landing.career')
    .run(appRun);

    appRun.$inject = ['routerHelper'];

    function appRun( routerHelper ){
      routerHelper.configureState(getStates());
    };

    function getStates(){
      return [
        {
          state: 'landing.careers',
          config: {
              templateUrl: 'panda-career.html',
              url: '/careers/:id',
              title : '職涯'
          }
        }
      ];
    };

})();
(function(){
  'use strict';
    /**
  * panadaApp Module
  *
  * Description
  */
  angular
    .module('landing.career')
    .controller('CareerController',CareerController);

    CareerController.$inject = [];

    function CareerController(){
      var vm = this; 
      // vm.careerId = $stateParams.id;
      console.log("it is career page");
    };

})();



(function(){
  'use strict';
  /**
  * landing.feature Module
  *
  * Description
  */
  angular
    .module('landing.feature')
    .controller('FeatureController',FeatureController);

    FeatureController.$inject = [];

    function FeatureController(){
      
    };

})();
(function(){
  'use strict';

  /**
  * landing.feature Module
  *
  * Description
  */
   angular
    .module('landing.feature')
    .run(appRun);

    appRun.$inject = ['routerHelper'];

    function appRun( routerHelper ){
      routerHelper.configureState(getStates());
    };

    function getStates(){
      return [
        {
          state: 'landing.feature',
          config: {
              templateUrl: 'panda-feature.html',
              url: '/features',
              title : '產品特色'
          }
        }
      ];
    };

})();
(function(){
  /**
* app.home Module
*
* Description
*/
angular
  .module('landing.home')
  .controller('HomeController',HomeController)

  HomeController.$inject = ['AccountService'];

  function HomeController(AccountService){
    var vm = this;
    vm.account = {};
    vm.submit = submit;
    
    
    $(".headline").hide().animate({ left:"0px", opacity:"show"}, 1500);

    function submit(){
      return AccountService.postAccount(vm.account);
    };

  };

})();
(function(){
  'use strict';
  /**
  * landing.home Module
  *
  * Description
  */
  angular
    .module('landing.home')
    .run(appRun);

    /* @ngInject */

    appRun.$inject = ['routerHelper'];

    function appRun(routerHelper) {
        routerHelper.configureState(getStates(),'/');
    };

    function getStates() {
        return [
            {
                state: 'landing.home',
                config: {
                    templateUrl: 'panda-home.html',
                    url: '/',
                    controller : 'HomeController',
                    controllerAs : 'HomeCtrl',
                    title : '首頁'
                }
            }
        ];
    };

})();
(function(){
  'use strict';

  /**
  * landing.navbar Module
  *
  * Description
  */
  angular
    .module('landing.navbar')
    .controller('NavbarController', NavbarController);

    NavbarController.$inject = ['$uibModal','$window','$scope','$translate'];

    function NavbarController($uibModal, $window,$scope, $translate){
      var vm = this; 
      vm.scroll = false;
      vm.text = "hello go go";
      vm.openRegisterModal = openRegisterModal; 

      function openRegisterModal() {
        return $uibModal.open({
          animation: true,
          templateUrl: 'register.modal.html',
          controller : 'RegisterController',
          controllerAs :'RegisterCtrl',
          size: 'md'
        });
      };

      $translate('TITLE').then(function (title) {
          console.log(title);
      });

      $("#try").on("scrollstart",function(){
        alert("Started scrolling!");
      });

      // angular.element($window).bind("scroll", function(e) {
      //   $scope.$apply(function(){
      //     vm.scroll = true;
      //   })
      //   console.log("start to scroll") 
      // });


    };

})();
(function(){
  'use strict';

  /**
  * app.register Module
  *
  * Description
  */
  angular
    .module('app.register')
    .controller('RegisterController',RegisterController);

    RegisterController.$inject = ['AccountService','$uibModalInstance'];

    function RegisterController(AccountService,$uibModalInstance){
      var vm = this; 
      vm.account = {};
      vm.submitAccount = submitAccount;
      vm.cancel = cancel; 

      function submitAccount(){
       
        AccountService.postAccount(vm.account).then(function(res){
          if (res) {
            $uibModalInstance.dismiss('cancel');
          };
        });
      };

      function cancel(){
        $uibModalInstance.dismiss('cancel');
      };
    };

})();
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImFwcC5tb2R1bGUuanMiLCJjb3Jlcy9jb3JlLm1vZHVsZS5qcyIsImRlbW8vZGVtby5tb2R1bGUuanMiLCJsYW5kaW5nL2xhbmRpbmcubW9kdWxlLmpzIiwic2lnbnVwL3NpZ251cC5tb2R1bGUuanMiLCJibG9jay9yb3V0ZXIvcm91dGVyLm1vZHVsZS5qcyIsImxhbmRpbmcvYWJvdXQvYWJvdXQubW9kdWxlLmpzIiwibGFuZGluZy9jYXJlZXIvY2FyZWVyLm1vZHVsZS5qcyIsImxhbmRpbmcvZmVhdHVyZS9mZWF0dXJlLm1vZHVsZS5qcyIsImxhbmRpbmcvaG9tZS9ob21lLm1vZHVsZS5qcyIsImxhbmRpbmcvbmF2YmFyL25hdmJhci5tb2R1bGUuanMiLCJtb2RhbC9yZWdpc3Rlci9yZWdpc3Rlci5tb2R1bGUuanMiLCJhcHAuY29uZmlnLmpzIiwiZGVtby9kZW1vLnJvdXRlci5qcyIsImRlbW8vZGVtb24uY3RybC5qcyIsImxhbmRpbmcvbGFuZGluZy5yb3V0ZXIuanMiLCJzaWdudXAvc2lnbnVwLmN0cmwuanMiLCJzaWdudXAvc2lnbnVwLnJvdXRlLmpzIiwiYmxvY2svcm91dGVyL3JvdXRlci1oZWxwZXIucHJvdmlkZXIuanMiLCJjb3Jlcy9kYXRhU2VydmljZS9hY2NvdW50LnNlcnZpY2UuanMiLCJsYW5kaW5nL2Fib3V0L2Fib3V0LmN0cmwuanMiLCJsYW5kaW5nL2Fib3V0L2Fib3V0LnJvdXRlLmpzIiwibGFuZGluZy9jYXJlZXIvY2FyZWVyLnJvdXRlci5qcyIsImxhbmRpbmcvY2FyZWVyL2NhcnJlci5jdHJsLmpzIiwibGFuZGluZy9mZWF0dXJlL2ZlYXR1cmUuY3RybC5qcyIsImxhbmRpbmcvZmVhdHVyZS9mZWF0dXJlLnJvdXRlci5qcyIsImxhbmRpbmcvaG9tZS9ob21lLmN0cmwuanMiLCJsYW5kaW5nL2hvbWUvaG9tZS5yb3V0ZS5qcyIsImxhbmRpbmcvbmF2YmFyL25hdmJhci5jdHJsLmpzIiwibW9kYWwvcmVnaXN0ZXIvcmVnaXN0ZXIuY3RybC5qcyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFBQSxDQUFBLFVBQUE7RUFDQTs7Ozs7O0VBTUEsUUFBQSxPQUFBLFlBQUE7SUFDQTtJQUNBO0lBQ0E7SUFDQTtJQUNBOzs7QUNaQSxDQUFBLFVBQUE7RUFDQTs7Ozs7O0VBTUE7S0FDQSxPQUFBLFdBQUE7TUFDQTtNQUNBOzs7QUNWQSxDQUFBLFVBQUE7RUFDQTs7Ozs7OztFQU9BO0tBQ0EsT0FBQSxZQUFBOztBQ1RBLENBQUEsVUFBQTtFQUNBOzs7Ozs7O0VBT0EsUUFBQSxPQUFBLGNBQUE7TUFDQTtNQUNBO01BQ0E7TUFDQTtNQUNBO01BQ0E7Ozs7QUNkQSxDQUFBLFVBQUE7RUFDQTs7Ozs7O0VBTUE7S0FDQSxPQUFBLGNBQUE7O0FDUkEsQ0FBQSxVQUFBO0VBQ0E7Ozs7Ozs7RUFPQSxRQUFBLE9BQUEsaUJBQUE7SUFDQTs7O0FDVEEsQ0FBQSxVQUFBO0VBQ0E7Ozs7OztFQU1BO0tBQ0EsT0FBQSxpQkFBQTtNQUNBOzs7QUNUQSxDQUFBLFVBQUE7RUFDQTs7Ozs7O0VBTUE7S0FDQSxPQUFBLGlCQUFBO01BQ0E7TUFDQTs7O0FDVkEsQ0FBQSxVQUFBO0VBQ0E7Ozs7OztFQU1BO0tBQ0EsT0FBQSxtQkFBQTs7QUNSQSxDQUFBLFVBQUE7Ozs7OztFQU1BO0tBQ0EsT0FBQSxlQUFBO01BQ0E7Ozs7QUNSQSxDQUFBLFVBQUE7RUFDQTs7Ozs7O0VBTUE7S0FDQSxPQUFBLGtCQUFBO01BQ0E7TUFDQTs7O0FDVkEsQ0FBQSxVQUFBO0VBQ0E7Ozs7Ozs7RUFPQTtLQUNBLE9BQUEsZ0JBQUE7TUFDQTs7O0FDVkEsQ0FBQSxVQUFBO0VBQ0E7Ozs7OztFQU1BO0tBQ0EsT0FBQTtLQUNBLE9BQUE7O0lBRUEsVUFBQSxVQUFBLENBQUE7O0lBRUEsU0FBQSxVQUFBLG1CQUFBO01BQ0EsbUJBQUEsYUFBQSxNQUFBO1FBQ0EsT0FBQTs7O01BR0EsbUJBQUEsYUFBQSxPQUFBO1FBQ0EsT0FBQTs7O01BR0EsbUJBQUEsYUFBQSxPQUFBO1FBQ0EsT0FBQTs7S0FFQTs7O0FDekJBLENBQUEsVUFBQTtFQUNBOzs7Ozs7RUFNQTtLQUNBLE9BQUE7S0FDQSxJQUFBOztJQUVBLE9BQUEsVUFBQSxDQUFBOztJQUVBLFNBQUEsT0FBQSxhQUFBO01BQ0EsYUFBQSxlQUFBO0tBQ0E7O0dBRUEsU0FBQSxZQUFBO1FBQ0EsT0FBQTtZQUNBO2dCQUNBLE9BQUE7Z0JBQ0EsUUFBQTtvQkFDQSxhQUFBO29CQUNBLEtBQUE7b0JBQ0EsYUFBQTtvQkFDQSxlQUFBO29CQUNBLFFBQUE7Ozs7S0FJQTs7OztBQzlCQSxDQUFBLFVBQUE7RUFDQTs7Ozs7O0VBTUE7S0FDQSxPQUFBO0tBQ0EsV0FBQSxpQkFBQTs7SUFFQSxlQUFBLFVBQUE7O0lBRUEsU0FBQSxnQkFBQTs7S0FFQTs7O0FDZkEsQ0FBQSxVQUFBO0VBQ0E7Ozs7OztJQU1BO0tBQ0EsT0FBQTtLQUNBLElBQUE7O0lBRUEsT0FBQSxVQUFBLENBQUE7O0lBRUEsU0FBQSxRQUFBLGNBQUE7TUFDQSxhQUFBLGVBQUE7S0FDQTs7SUFFQSxTQUFBLFdBQUE7TUFDQSxPQUFBO1FBQ0E7VUFDQSxPQUFBO1VBQ0EsUUFBQTtjQUNBLFdBQUE7Y0FDQSxhQUFBOzs7O0tBSUE7O0FDM0JBLENBQUEsVUFBQTtFQUNBOzs7Ozs7O0VBT0E7S0FDQSxPQUFBO0tBQ0EsV0FBQSxtQkFBQTs7SUFFQSxpQkFBQSxVQUFBLENBQUE7O0lBRUEsU0FBQSxpQkFBQSxlQUFBOztLQUVBOztBQ2hCQSxDQUFBLFVBQUE7RUFDQTs7Ozs7OztFQU9BO0tBQ0EsT0FBQTtLQUNBLElBQUE7O0lBRUEsT0FBQSxVQUFBLENBQUE7O0lBRUEsU0FBQSxRQUFBLGNBQUE7TUFDQSxhQUFBLGVBQUE7S0FDQTs7SUFFQSxTQUFBLFlBQUE7UUFDQSxPQUFBO1lBQ0E7Z0JBQ0EsT0FBQTtnQkFDQSxRQUFBO29CQUNBLGFBQUE7b0JBQ0EsS0FBQTtvQkFDQSxhQUFBO29CQUNBLGVBQUE7b0JBQ0EsUUFBQTs7OztLQUlBOzs7QUMvQkEsQ0FBQSxVQUFBO0VBQ0E7Ozs7Ozs7RUFPQTtLQUNBLE9BQUE7S0FDQSxTQUFBLGVBQUE7O0lBRUEscUJBQUEsVUFBQSxDQUFBLG9CQUFBLGlCQUFBOztFQUVBLFNBQUEscUJBQUEsa0JBQUEsZUFBQSxtQkFBQTs7SUFFQSxJQUFBLFNBQUE7TUFDQSxXQUFBOzs7Ozs7OztJQVFBLEtBQUEsT0FBQTs7SUFFQSxhQUFBLFVBQUEsQ0FBQSxTQUFBOztJQUVBLFNBQUEsYUFBQSxRQUFBLFdBQUE7TUFDQSxJQUFBLGVBQUE7O01BRUEsSUFBQSxVQUFBO1FBQ0EsaUJBQUE7UUFDQSxZQUFBOzs7TUFHQTs7TUFFQSxPQUFBOztNQUVBLFNBQUEsZUFBQSxRQUFBLGNBQUE7UUFDQSxPQUFBLFFBQUEsU0FBQSxNQUFBO1VBQ0EsZUFBQSxNQUFBLE1BQUEsTUFBQSxNQUFBOzs7UUFHQSxLQUFBLGlCQUFBLENBQUEsY0FBQTtVQUNBLGVBQUE7VUFDQSxtQkFBQSxVQUFBO1NBQ0E7T0FDQTtNQUNBLFNBQUEsV0FBQSxFQUFBLE9BQUEsT0FBQSxNQUFBOztNQUVBLFNBQUEsTUFBQTtRQUNBO09BQ0E7O01BRUEsU0FBQSxnQkFBQTtRQUNBLFdBQUEsSUFBQTtVQUNBLFNBQUEsT0FBQSxTQUFBLFVBQUEsV0FBQSxXQUFBO1lBQ0EsSUFBQSxRQUFBLE9BQUEsV0FBQSxTQUFBLFFBQUEsU0FBQTtZQUNBLFNBQUEsS0FBQSxZQUFBLFNBQUEsZ0JBQUEsWUFBQTtZQUNBLFdBQUEsUUFBQTs7T0FFQTtLQUNBO0dBQ0E7Ozs7QUNsRUEsQ0FBQSxVQUFBO0VBQ0E7Ozs7OztFQU1BO0tBQ0EsT0FBQTtLQUNBLFFBQUEsaUJBQUE7O0lBRUEsZUFBQSxVQUFBLENBQUE7O0lBRUEsU0FBQSxlQUFBLE1BQUE7UUFDQSxPQUFBO1VBQ0EsY0FBQTs7O1FBR0EsU0FBQSxZQUFBLFFBQUE7VUFDQSxPQUFBLE1BQUEsS0FBQSxpQkFBQTttQkFDQSxLQUFBO21CQUNBLE1BQUE7O1VBRUEsU0FBQSxZQUFBLElBQUE7WUFDQSxPQUFBLElBQUE7V0FDQTs7VUFFQSxTQUFBLFdBQUEsSUFBQTtZQUNB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QUFBLFNBQUE7TUFDQSxHQUFBLE9BQUE7TUFDQSxHQUFBLG9CQUFBOztNQUVBLFNBQUEsb0JBQUE7UUFDQSxPQUFBLFVBQUEsS0FBQTtVQUNBLFdBQUE7VUFDQSxhQUFBO1VBQ0EsYUFBQTtVQUNBLGNBQUE7VUFDQSxNQUFBOztPQUVBOztNQUVBLFdBQUEsU0FBQSxLQUFBLFVBQUEsT0FBQTtVQUNBLFFBQUEsSUFBQTs7O01BR0EsRUFBQSxRQUFBLEdBQUEsY0FBQSxVQUFBO1FBQ0EsTUFBQTs7Ozs7Ozs7Ozs7S0FXQTs7O0FDOUNBLENBQUEsVUFBQTtFQUNBOzs7Ozs7O0VBT0E7S0FDQSxPQUFBO0tBQ0EsV0FBQSxxQkFBQTs7SUFFQSxtQkFBQSxVQUFBLENBQUEsaUJBQUE7O0lBRUEsU0FBQSxtQkFBQSxlQUFBLGtCQUFBO01BQ0EsSUFBQSxLQUFBO01BQ0EsR0FBQSxVQUFBO01BQ0EsR0FBQSxnQkFBQTtNQUNBLEdBQUEsU0FBQTs7TUFFQSxTQUFBLGVBQUE7O1FBRUEsZUFBQSxZQUFBLEdBQUEsU0FBQSxLQUFBLFNBQUEsSUFBQTtVQUNBLElBQUEsS0FBQTtZQUNBLGtCQUFBLFFBQUE7V0FDQTs7T0FFQTs7TUFFQSxTQUFBLFFBQUE7UUFDQSxrQkFBQSxRQUFBO09BQ0E7S0FDQTs7S0FFQSIsImZpbGUiOiJhcHAubWluLmpzIiwic291cmNlc0NvbnRlbnQiOlsiKGZ1bmN0aW9uKCl7XG4gICd1c2Ugc3RyaWN0JztcbiAgICAvKipcbiAgKiBhcHAgTW9kdWxlXG4gICpcbiAgKiBEZXNjcmlwdGlvblxuICAqL1xuICBhbmd1bGFyLm1vZHVsZSgncGFuZGFBcHAnLCBbXG4gICAgJ2FwcC5jb3JlJyxcbiAgICAnYXBwLmxhbmRpbmcnLFxuICAgICdhcHAuZGVtbycsXG4gICAgJ2FwcC5zaWdudXAnLFxuICAgICdwYXNjYWxwcmVjaHQudHJhbnNsYXRlJ1xuICBdKTtcbn0pKCk7IiwiKGZ1bmN0aW9uKCl7XG4gICd1c2Ugc3RyaWN0JztcbiAgLyoqXG4gICogYXBwLmNvcmUgTW9kdWxlXG4gICpcbiAgKiBEZXNjcmlwdGlvblxuICAqL1xuICBhbmd1bGFyXG4gICAgLm1vZHVsZSgnYXBwLmNvcmUnLFtcbiAgICAgICdibG9ja3Mucm91dGVyJyxcbiAgICAgICd1aS5yb3V0ZXInXG4gICAgICBdKVxufSkoKTsiLCIoZnVuY3Rpb24oKXtcbiAgJ3VzZSBzdHJpY3QnO1xuXG4gIC8qKlxuICAqIGxhbmRpbmcuZGVtbyBNb2R1bGVcbiAgKlxuICAqIERlc2NyaXB0aW9uXG4gICovXG4gIGFuZ3VsYXJcbiAgICAubW9kdWxlKCdhcHAuZGVtbycsIFtdKTtcbn0pKCk7IiwiKGZ1bmN0aW9uKCl7XG4gICd1c2Ugc3RyaWN0JztcblxuICAvKipcbiAgKiBhcHAubGFuZGluZyBNb2R1bGVcbiAgKlxuICAqIERlc2NyaXB0aW9uXG4gICovXG4gIGFuZ3VsYXIubW9kdWxlKCdhcHAubGFuZGluZycsW1xuICAgICAgJ2FwcC5jb3JlJyxcbiAgICAgICdsYW5kaW5nLmhvbWUnLFxuICAgICAgJ2xhbmRpbmcuYWJvdXQnLFxuICAgICAgJ2xhbmRpbmcuY2FyZWVyJyxcbiAgICAgICdsYW5kaW5nLm5hdmJhcicsXG4gICAgICAnbGFuZGluZy5mZWF0dXJlJyxcbiAgICAgXG4gICAgXSlcbn0pKCk7IiwiKGZ1bmN0aW9uKCl7XG4gICd1c2Ugc3RyaWN0JztcbiAgLyoqXG4gICogbGFuZGluZy5zaWdudXAgTW9kdWxlXG4gICpcbiAgKiBEZXNjcmlwdGlvblxuICAqL1xuICBhbmd1bGFyXG4gICAgLm1vZHVsZSgnYXBwLnNpZ251cCcsIFtdKTtcbn0pKCk7IiwiKGZ1bmN0aW9uKCl7XG4gICd1c2Ugc3RyaWN0JztcbiAvKipcbiAqIGJsb2Nrcy5yb3V0ZXIgTW9kdWxlXG4gKlxuICogRGVzY3JpcHRpb25cbiAqL1xuICBcbiAgYW5ndWxhci5tb2R1bGUoJ2Jsb2Nrcy5yb3V0ZXInLCBbXG4gICAgJ3VpLnJvdXRlcidcbiAgICBdKTtcbn0pKCk7IiwiKGZ1bmN0aW9uKCl7XG4gICd1c2Ugc3RyaWN0JztcbiAgLyoqXG4gICogbGFuZGluZy5hYm91dCBNb2R1bGVcbiAgKlxuICAqIERlc2NyaXB0aW9uXG4gICovXG4gIGFuZ3VsYXJcbiAgICAubW9kdWxlKCdsYW5kaW5nLmFib3V0JywgW1xuICAgICAgJ2FwcC5jb3JlJ1xuICAgIF0pXG59KSgpOyIsIihmdW5jdGlvbigpe1xuICAndXNlIHN0cmljdCc7XG4gIC8qKlxuICAqIGFwcC5jYXJlZXIgTW9kdWxlXG4gICpcbiAgKiBEZXNjcmlwdGlvblxuICAqL1xuICBhbmd1bGFyXG4gICAgLm1vZHVsZSgnbGFuZGluZy5jYXJlZXInLFtcbiAgICAgICdhcHAuY29yZScsXG4gICAgICAndWkucm91dGVyJ1xuICAgIF0pO1xufSkoKTsiLCIoZnVuY3Rpb24oKXtcbiAgJ3VzZSBzdHJpY3QnO1xuICAvKipcbiAgKiBsYW5kaW5nLmZlYXR1cmUgTW9kdWxlXG4gICpcbiAgKiBEZXNjcmlwdGlvblxuICAqL1xuICBhbmd1bGFyXG4gICAgLm1vZHVsZSgnbGFuZGluZy5mZWF0dXJlJywgW10pXG59KSgpOyIsIihmdW5jdGlvbigpe1xuICAvKipcbiAgKiBhcHAucGFuZGEtaG9tZSBNb2R1bGVcbiAgKlxuICAqIERlc2NyaXB0aW9uXG4gICovXG4gIGFuZ3VsYXJcbiAgICAubW9kdWxlKCdsYW5kaW5nLmhvbWUnLFtcbiAgICAgICdhcHAuY29yZSdcbiAgICBdKVxuXG59KSgpOyIsIihmdW5jdGlvbigpe1xuICAndXNlIHN0cmljdCc7XG4gIC8qKlxuICAqIGxhbmRpbmcubmF2YmFyIE1vZHVsZVxuICAqXG4gICogRGVzY3JpcHRpb25cbiAgKi9cbiAgYW5ndWxhclxuICAgIC5tb2R1bGUoJ2xhbmRpbmcubmF2YmFyJywgW1xuICAgICAgJ3VpLmJvb3RzdHJhcCcsXG4gICAgICAnYXBwLnJlZ2lzdGVyJ1xuICAgIF0pO1xufSkoKTsiLCIoZnVuY3Rpb24oKXtcbiAgJ3VzZSBzdHJpY3QnO1xuXG4gIC8qKlxuICAqIGFwcC5yZWdpc3RlciBNb2R1bGVcbiAgKlxuICAqIERlc2NyaXB0aW9uXG4gICovXG4gIGFuZ3VsYXJcbiAgICAubW9kdWxlKCdhcHAucmVnaXN0ZXInLCBbXG4gICAgICAndWkuYm9vdHN0cmFwJ1xuICAgIF0pO1xufSkoKTsiLCIoZnVuY3Rpb24oKXtcbiAgJ3VzZSBzdHJpY3QnO1xuICAvKipcbiAgKiBhcHAgTW9kdWxlXG4gICpcbiAgKiBEZXNjcmlwdGlvblxuICAqL1xuICBhbmd1bGFyXG4gICAgLm1vZHVsZSgncGFuZGFBcHAnKVxuICAgIC5jb25maWcoYXBwQ29uZmlnKTtcblxuICAgIGFwcENvbmZpZy4kaW5qZWN0ID0gWyckdHJhbnNsYXRlUHJvdmlkZXInXTtcblxuICAgIGZ1bmN0aW9uIGFwcENvbmZpZygkdHJhbnNsYXRlUHJvdmlkZXIpe1xuICAgICAgJHRyYW5zbGF0ZVByb3ZpZGVyLnRyYW5zbGF0aW9ucygnZW4nLCB7XG4gICAgICAgIFRJVExFOiAnTWFya2V0UGFuZGEnXG4gICAgICB9KTtcblxuICAgICAgJHRyYW5zbGF0ZVByb3ZpZGVyLnRyYW5zbGF0aW9ucygnemgtdCcse1xuICAgICAgICBUSVRMRTogJ+W4guWgtOeGiuiykydcbiAgICAgIH0pO1xuXG4gICAgICAkdHJhbnNsYXRlUHJvdmlkZXIudHJhbnNsYXRpb25zKCd6aC1zJyx7XG4gICAgICAgIFRJVExFOiAn5biC5Zy654aK54yrJ1xuICAgICAgfSk7XG4gICAgfTtcblxufSkoKTsiLCIoZnVuY3Rpb24oKXtcbiAgJ3VzZSBzdHJpY3QnO1xuICAvKipcbiAgKiBsYW5kaW5nLmRlbW8gTW9kdWxlXG4gICpcbiAgKiBEZXNjcmlwdGlvblxuICAqL1xuICBhbmd1bGFyXG4gICAgLm1vZHVsZSgnYXBwLmRlbW8nKVxuICAgIC5ydW4oYXBwUnVuKTtcblxuICAgIGFwcFJ1bi4kaW5qZWN0ID0gWydyb3V0ZXJIZWxwZXInXTtcblxuICAgIGZ1bmN0aW9uIGFwcFJ1bihyb3V0ZXJIZWxwZXIpe1xuICAgICAgcm91dGVySGVscGVyLmNvbmZpZ3VyZVN0YXRlKGdldFN0YXRlcygpKTtcbiAgICB9O1xuXG4gICBmdW5jdGlvbiBnZXRTdGF0ZXMoKSB7XG4gICAgICAgIHJldHVybiBbXG4gICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgc3RhdGU6ICdkZW1vJyxcbiAgICAgICAgICAgICAgICBjb25maWc6IHtcbiAgICAgICAgICAgICAgICAgICAgdGVtcGxhdGVVcmw6ICdwYW5kYS1kZW1vLmh0bWwnLFxuICAgICAgICAgICAgICAgICAgICB1cmw6ICcvZGVtbycsXG4gICAgICAgICAgICAgICAgICAgIGNvbnRyb2xsZXIgOiAnRGVtb0NvbnRyb2xsZXInLFxuICAgICAgICAgICAgICAgICAgICBjb250cm9sbGVyQXMgOiAnRGVtb0N0cmwnLFxuICAgICAgICAgICAgICAgICAgICB0aXRsZSA6ICfmvJTnpLonXG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICBdO1xuICAgIH07XG5cblxufSkoKTsiLCIoZnVuY3Rpb24oKXtcbiAgJ3VzZSBzdHJpY3QnO1xuICAvKipcbiAgKiBsYW5kaW5nLmRlbW8gTW9kdWxlXG4gICpcbiAgKiBEZXNjcmlwdGlvblxuICAqL1xuICBhbmd1bGFyXG4gICAgLm1vZHVsZSgnYXBwLmRlbW8nKVxuICAgIC5jb250cm9sbGVyKCdEZW1vQ29udHJvbGxlcicsRGVtb0NvbnRyb2xsZXIpO1xuXG4gICAgRGVtb0NvbnRyb2xsZXIuJGluamVjdCA9IFtdO1xuXG4gICAgZnVuY3Rpb24gRGVtb0NvbnRyb2xsZXIoKXtcblxuICAgIH07XG5cbn0pKCk7IiwiKGZ1bmN0aW9uKCl7XG4gICd1c2Ugc3RyaWN0JztcbiAgLyoqXG4gICogYXBwLmxhbmRpbmcgTW9kdWxlXG4gICpcbiAgKiBEZXNjcmlwdGlvblxuICAqL1xuICAgIGFuZ3VsYXJcbiAgICAubW9kdWxlKCdhcHAubGFuZGluZycpXG4gICAgLnJ1bihhcHBSdW4pO1xuXG4gICAgYXBwUnVuLiRpbmplY3QgPSBbJ3JvdXRlckhlbHBlciddO1xuXG4gICAgZnVuY3Rpb24gYXBwUnVuKCByb3V0ZXJIZWxwZXIgKXtcbiAgICAgIHJvdXRlckhlbHBlci5jb25maWd1cmVTdGF0ZShnZXRTdGF0ZXMoKSk7XG4gICAgfTtcblxuICAgIGZ1bmN0aW9uIGdldFN0YXRlcygpe1xuICAgICAgcmV0dXJuIFtcbiAgICAgICAge1xuICAgICAgICAgIHN0YXRlOiAnbGFuZGluZycsXG4gICAgICAgICAgY29uZmlnOiB7XG4gICAgICAgICAgICAgIGFic3RyYWN0IDogdHJ1ZSxcbiAgICAgICAgICAgICAgdGVtcGxhdGVVcmw6ICcuL2NvbW1vbi9jb250ZW50Lmh0bWwnXG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICBdO1xuICAgIH07XG59KSgpOyIsIihmdW5jdGlvbigpe1xuICAndXNlIHN0cmljdCc7XG5cbiAgLyoqXG4gICogbGFuZGluZy5zaWdudXAgTW9kdWxlXG4gICpcbiAgKiBEZXNjcmlwdGlvblxuICAqL1xuICBhbmd1bGFyXG4gICAgLm1vZHVsZSgnYXBwLnNpZ251cCcpXG4gICAgLmNvbnRyb2xsZXIoJ1NpZ251cENvbnRyb2xsZXInLFNpZ251cENvbnRyb2xsZXIpO1xuXG4gICAgU2lnbnVwQ29udHJvbGxlci4kaW5qZWN0ID0gWydBY2NvdW50U2VydmljZSddO1xuXG4gICAgZnVuY3Rpb24gU2lnbnVwQ29udHJvbGxlcihBY2NvdW50U2VydmljZSl7XG5cbiAgICB9O1xufSkoKTsiLCIoZnVuY3Rpb24oKXtcbiAgJ3VzZSBzdHJpY3QnO1xuICAvKipcbiAgKiBsYW5kaW5nLnNpZ251cCBNb2R1bGVcbiAgKlxuICAqIERlc2NyaXB0aW9uXG4gICovXG5cbiAgYW5ndWxhclxuICAgIC5tb2R1bGUoJ2FwcC5zaWdudXAnKVxuICAgIC5ydW4oYXBwUnVuKTtcblxuICAgIGFwcFJ1bi4kaW5qZWN0ID0gWydyb3V0ZXJIZWxwZXInXTtcblxuICAgIGZ1bmN0aW9uIGFwcFJ1biggcm91dGVySGVscGVyICl7XG4gICAgICByb3V0ZXJIZWxwZXIuY29uZmlndXJlU3RhdGUoZ2V0U3RhdGVzKCkpO1xuICAgIH07XG5cbiAgICBmdW5jdGlvbiBnZXRTdGF0ZXMoKSB7XG4gICAgICAgIHJldHVybiBbXG4gICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgc3RhdGU6ICdzaWdudXAnLFxuICAgICAgICAgICAgICAgIGNvbmZpZzoge1xuICAgICAgICAgICAgICAgICAgICB0ZW1wbGF0ZVVybDogJ3BhbmRhLXNpZ251cC5odG1sJyxcbiAgICAgICAgICAgICAgICAgICAgdXJsOiAnL3NpZ251cCcsXG4gICAgICAgICAgICAgICAgICAgIGNvbnRyb2xsZXIgOiAnU2lnbnVwQ29udHJvbGxlcicsXG4gICAgICAgICAgICAgICAgICAgIGNvbnRyb2xsZXJBcyA6ICdTaWdudXBDdHJsJyxcbiAgICAgICAgICAgICAgICAgICAgdGl0bGUgOiAn6Ki75YaKJ1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgXTtcbiAgICB9O1xuXG59KSgpOyIsIihmdW5jdGlvbigpe1xuICAndXNlIHN0cmljdCc7XG5cbiAgLyoqXG4gICogYmxvY2tzLnJvdXRlciBNb2R1bGVcbiAgKlxuICAqIERlc2NyaXB0aW9uXG4gICovXG4gIGFuZ3VsYXJcbiAgICAubW9kdWxlKCdibG9ja3Mucm91dGVyJylcbiAgICAucHJvdmlkZXIoJ3JvdXRlckhlbHBlcicscm91dGVySGVscGVyUHJvdmlkZXIpO1xuXG4gICAgcm91dGVySGVscGVyUHJvdmlkZXIuJGluamVjdCA9IFsnJGxvY2F0aW9uUHJvdmlkZXInLCckc3RhdGVQcm92aWRlcicsJyR1cmxSb3V0ZXJQcm92aWRlciddO1xuXG4gIGZ1bmN0aW9uIHJvdXRlckhlbHBlclByb3ZpZGVyKCRsb2NhdGlvblByb3ZpZGVyLCRzdGF0ZVByb3ZpZGVyLCR1cmxSb3V0ZXJQcm92aWRlcil7XG5cbiAgICB2YXIgY29uZmlnID0ge1xuICAgICAgZG9jVGl0bGUgOiAn5oiQ6ZW354aK6LKTJ1xuICAgIH1cblxuICAgIC8vICRsb2NhdGlvblByb3ZpZGVyLmh0bWw1TW9kZSh7XG4gICAgLy8gICBlbmFibGVkOiB0cnVlLFxuICAgIC8vICAgcmVxdWlyZUJhc2U6IGZhbHNlXG4gICAgLy8gfSk7XG5cbiAgICB0aGlzLiRnZXQgPSBSb3V0ZXJIZWxwZXI7XG5cbiAgICBSb3V0ZXJIZWxwZXIuJGluamVjdCA9IFsnJHN0YXRlJywnJHJvb3RTY29wZSddO1xuXG4gICAgZnVuY3Rpb24gUm91dGVySGVscGVyKCRzdGF0ZSwgJHJvb3RTY29wZSl7XG4gICAgICB2YXIgaGFzT3RoZXJ3aXNlID0gZmFsc2U7IFxuXG4gICAgICB2YXIgc2VydmljZSA9IHtcbiAgICAgICAgY29uZmlndXJlU3RhdGUgOiBjb25maWd1cmVTdGF0ZSxcbiAgICAgICAgZ2V0U3RhdGVzIDogZ2V0U3RhdGVzXG4gICAgICB9O1xuXG4gICAgICBpbml0KCk7XG5cbiAgICAgIHJldHVybiBzZXJ2aWNlO1xuXG4gICAgICBmdW5jdGlvbiBjb25maWd1cmVTdGF0ZShzdGF0ZXMsIG90aGVyd2lzZVBhdGgpe1xuICAgICAgICBzdGF0ZXMuZm9yRWFjaChmdW5jdGlvbihzdGF0ZSl7XG4gICAgICAgICAgJHN0YXRlUHJvdmlkZXIuc3RhdGUoc3RhdGUuc3RhdGUsc3RhdGUuY29uZmlnKTtcbiAgICAgICAgfSk7XG5cbiAgICAgICAgaWYgKCBvdGhlcndpc2VQYXRoICYmICFoYXNPdGhlcndpc2UpIHtcbiAgICAgICAgICBoYXNPdGhlcndpc2UgPSB0cnVlOyBcbiAgICAgICAgICAkdXJsUm91dGVyUHJvdmlkZXIub3RoZXJ3aXNlKG90aGVyd2lzZVBhdGgpO1xuICAgICAgICB9O1xuICAgICAgfTtcbiAgICAgIGZ1bmN0aW9uIGdldFN0YXRlcygpeyByZXR1cm4gJHN0YXRlLmdldCgpfTtcblxuICAgICAgZnVuY3Rpb24gaW5pdCgpe1xuICAgICAgICB1cGRhdGVEb2NUaXRsZSgpO1xuICAgICAgfTtcblxuICAgICAgZnVuY3Rpb24gdXBkYXRlRG9jVGl0bGUoKXtcbiAgICAgICAgJHJvb3RTY29wZS4kb24oJyRzdGF0ZUNoYW5nZVN1Y2Nlc3MnLFxuICAgICAgICAgIGZ1bmN0aW9uKGV2ZW50LCB0b1N0YXRlLCB0b1BhcmFtcywgZnJvbVN0YXRlLCBmcm9tUGFyYW1zKXtcbiAgICAgICAgICAgIHZhciB0aXRsZSA9IGNvbmZpZy5kb2NUaXRsZSArICcgfCAnICsgKHRvU3RhdGUudGl0bGUgfHwgJycpO1xuICAgICAgICAgICAgZG9jdW1lbnQuYm9keS5zY3JvbGxUb3AgPSBkb2N1bWVudC5kb2N1bWVudEVsZW1lbnQuc2Nyb2xsVG9wID0gMDtcbiAgICAgICAgICAgICRyb290U2NvcGUudGl0bGUgPSB0aXRsZTtcbiAgICAgICAgICB9KTtcbiAgICAgIH07XG4gICAgfTtcbiAgfTtcblxufSkoKTtcbiIsIihmdW5jdGlvbigpe1xuICAndXNlIHN0cmljdCc7XG4gIC8qKlxuICAqIGFwcC5jb3JlIE1vZHVsZVxuICAqXG4gICogRGVzY3JpcHRpb25cbiAgKi9cbiAgYW5ndWxhclxuICAgIC5tb2R1bGUoJ2FwcC5jb3JlJylcbiAgICAuZmFjdG9yeSgnQWNjb3VudFNlcnZpY2UnLEFjY291bnRTZXJ2aWNlKTtcblxuICAgIEFjY291bnRTZXJ2aWNlLiRpbmplY3QgPSBbJyRodHRwJ107XG5cbiAgICBmdW5jdGlvbiBBY2NvdW50U2VydmljZSgkaHR0cCl7XG4gICAgICAgIHJldHVybiB7XG4gICAgICAgICAgcG9zdEFjY291bnQgOiBwb3N0QWNjb3VudFxuICAgICAgICB9O1xuXG4gICAgICAgIGZ1bmN0aW9uIHBvc3RBY2NvdW50KGFjY291bnQpe1xuICAgICAgICAgIHJldHVybiAkaHR0cC5wb3N0KCcvYXBpL2FjY291bnRzJywgYWNjb3VudClcbiAgICAgICAgICAgICAgICAgIC50aGVuKHBvc3RTdWNjZXNzKVxuICAgICAgICAgICAgICAgICAgLmNhdGNoKHBvc3RGYWlsZWQpO1xuXG4gICAgICAgICAgZnVuY3Rpb24gcG9zdFN1Y2Nlc3MocmVzKXtcbiAgICAgICAgICAgIHJldHVybiByZXMuZGF0YTtcbiAgICAgICAgICB9O1xuXG4gICAgICAgICAgZnVuY3Rpb24gcG9zdEZhaWxlZChyZXMpe1xuICAgICAgICAgICAgcmV0dXJuIGNvbnNvbGUubG9nKHJlcyk7XG4gICAgICAgICAgfTtcblxuICAgICAgICB9OyBcbiAgICB9O1xuXG59KSgpOyIsIihmdW5jdGlvbigpe1xuICAndXNlIHN0cmljdCc7XG4gIC8qKlxuKiBsYW5kaW5nLmFib3V0IE1vZHVsZVxuKlxuKiBEZXNjcmlwdGlvblxuKi9cbmFuZ3VsYXJcbiAgLm1vZHVsZSgnbGFuZGluZy5hYm91dCcpXG4gIC5jb250cm9sbGVyKCdBYm91dENvbnRyb2xsZXInLEFib3V0Q29udHJvbGxlcilcblxuICBBYm91dENvbnRyb2xsZXIuJGluamVjdCA9IFsnJHJvb3RTY29wZSddO1xuXG4gIGZ1bmN0aW9uIEFib3V0Q29udHJvbGxlcigkcm9vdFNjb3BlKXtcbiAgICB2YXIgdm0gPSB0aGlzOyBcbiAgICB2YXIgdG9wID0gJChcIiNjYXJlZXJcIikub2Zmc2V0KCkudG9wICAtIDMuNSpwYXJzZUZsb2F0KCQoJyNjYXJlZXInKS5jc3MoJ21hcmdpblRvcCcpLnJlcGxhY2UoL2F1dG8vLDApKTtcbiAgICAkKCcjam9pbnVzJykuY2xpY2soZnVuY3Rpb24gKCkge1xuICAgICAgICAkKCdodG1sLGJvZHknKS5hbmltYXRlKHtzY3JvbGxUb3A6dG9wfSwgNTAwKTtcbiAgICB9KTtcblxuICB9O1xuXG59KSgpO1xuIiwiKGZ1bmN0aW9uKCl7XG4gICd1c2Ugc3RyaWN0JztcblxuICAvKipcbiAgKiBsYW5kaW5nLmhvbWUgTW9kdWxlXG4gICpcbiAgKiBEZXNjcmlwdGlvblxuICAqL1xuICBhbmd1bGFyXG4gICAgLm1vZHVsZSgnbGFuZGluZy5hYm91dCcpXG4gICAgLnJ1bihhcHBSdW4pO1xuXG4gICAgYXBwUnVuLiRpbmplY3QgPSBbJ3JvdXRlckhlbHBlciddO1xuXG4gICAgZnVuY3Rpb24gYXBwUnVuKCByb3V0ZXJIZWxwZXIgKXtcbiAgICAgIHJvdXRlckhlbHBlci5jb25maWd1cmVTdGF0ZShnZXRTdGF0ZXMoKSk7XG4gICAgfVxuXG4gICAgZnVuY3Rpb24gZ2V0U3RhdGVzKCkge1xuICAgICAgICByZXR1cm4gW1xuICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgIHN0YXRlOiAnbGFuZGluZy5hYm91dCcsXG4gICAgICAgICAgICAgICAgY29uZmlnOiB7XG4gICAgICAgICAgICAgICAgICAgIHRlbXBsYXRlVXJsOiAncGFuZGEtYWJvdXQuaHRtbCcsXG4gICAgICAgICAgICAgICAgICAgIHVybDogJy9hYm91dCcsXG4gICAgICAgICAgICAgICAgICAgIGNvbnRyb2xsZXIgOiAnQWJvdXRDb250cm9sbGVyJyxcbiAgICAgICAgICAgICAgICAgICAgY29udHJvbGxlckFzIDogJ0Fib3V0Q3RybCcsXG4gICAgICAgICAgICAgICAgICAgIHRpdGxlIDogJ+mXnOaWvOaIkeWAkSdcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgIF07XG4gICAgfTtcbiAgICBcbn0pKCk7XG4iLCIoZnVuY3Rpb24oKXtcbiAgJ3VzZSBzdHJpY3QnO1xuICBcbiAgLyoqXG4gICogYXBwLmNhcmVlciBNb2R1bGVcbiAgKlxuICAqIERlc2NyaXB0aW9uXG4gICovXG4gIGFuZ3VsYXJcbiAgICAubW9kdWxlKCdsYW5kaW5nLmNhcmVlcicpXG4gICAgLnJ1bihhcHBSdW4pO1xuXG4gICAgYXBwUnVuLiRpbmplY3QgPSBbJ3JvdXRlckhlbHBlciddO1xuXG4gICAgZnVuY3Rpb24gYXBwUnVuKCByb3V0ZXJIZWxwZXIgKXtcbiAgICAgIHJvdXRlckhlbHBlci5jb25maWd1cmVTdGF0ZShnZXRTdGF0ZXMoKSk7XG4gICAgfTtcblxuICAgIGZ1bmN0aW9uIGdldFN0YXRlcygpe1xuICAgICAgcmV0dXJuIFtcbiAgICAgICAge1xuICAgICAgICAgIHN0YXRlOiAnbGFuZGluZy5jYXJlZXJzJyxcbiAgICAgICAgICBjb25maWc6IHtcbiAgICAgICAgICAgICAgdGVtcGxhdGVVcmw6ICdwYW5kYS1jYXJlZXIuaHRtbCcsXG4gICAgICAgICAgICAgIHVybDogJy9jYXJlZXJzLzppZCcsXG4gICAgICAgICAgICAgIHRpdGxlIDogJ+iBt+a2rydcbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgIF07XG4gICAgfTtcblxufSkoKTsiLCIoZnVuY3Rpb24oKXtcbiAgJ3VzZSBzdHJpY3QnO1xuICAgIC8qKlxuICAqIHBhbmFkYUFwcCBNb2R1bGVcbiAgKlxuICAqIERlc2NyaXB0aW9uXG4gICovXG4gIGFuZ3VsYXJcbiAgICAubW9kdWxlKCdsYW5kaW5nLmNhcmVlcicpXG4gICAgLmNvbnRyb2xsZXIoJ0NhcmVlckNvbnRyb2xsZXInLENhcmVlckNvbnRyb2xsZXIpO1xuXG4gICAgQ2FyZWVyQ29udHJvbGxlci4kaW5qZWN0ID0gW107XG5cbiAgICBmdW5jdGlvbiBDYXJlZXJDb250cm9sbGVyKCl7XG4gICAgICB2YXIgdm0gPSB0aGlzOyBcbiAgICAgIC8vIHZtLmNhcmVlcklkID0gJHN0YXRlUGFyYW1zLmlkO1xuICAgICAgY29uc29sZS5sb2coXCJpdCBpcyBjYXJlZXIgcGFnZVwiKTtcbiAgICB9O1xuXG59KSgpO1xuXG5cbiIsIihmdW5jdGlvbigpe1xuICAndXNlIHN0cmljdCc7XG4gIC8qKlxuICAqIGxhbmRpbmcuZmVhdHVyZSBNb2R1bGVcbiAgKlxuICAqIERlc2NyaXB0aW9uXG4gICovXG4gIGFuZ3VsYXJcbiAgICAubW9kdWxlKCdsYW5kaW5nLmZlYXR1cmUnKVxuICAgIC5jb250cm9sbGVyKCdGZWF0dXJlQ29udHJvbGxlcicsRmVhdHVyZUNvbnRyb2xsZXIpO1xuXG4gICAgRmVhdHVyZUNvbnRyb2xsZXIuJGluamVjdCA9IFtdO1xuXG4gICAgZnVuY3Rpb24gRmVhdHVyZUNvbnRyb2xsZXIoKXtcbiAgICAgIFxuICAgIH07XG5cbn0pKCk7IiwiKGZ1bmN0aW9uKCl7XG4gICd1c2Ugc3RyaWN0JztcblxuICAvKipcbiAgKiBsYW5kaW5nLmZlYXR1cmUgTW9kdWxlXG4gICpcbiAgKiBEZXNjcmlwdGlvblxuICAqL1xuICAgYW5ndWxhclxuICAgIC5tb2R1bGUoJ2xhbmRpbmcuZmVhdHVyZScpXG4gICAgLnJ1bihhcHBSdW4pO1xuXG4gICAgYXBwUnVuLiRpbmplY3QgPSBbJ3JvdXRlckhlbHBlciddO1xuXG4gICAgZnVuY3Rpb24gYXBwUnVuKCByb3V0ZXJIZWxwZXIgKXtcbiAgICAgIHJvdXRlckhlbHBlci5jb25maWd1cmVTdGF0ZShnZXRTdGF0ZXMoKSk7XG4gICAgfTtcblxuICAgIGZ1bmN0aW9uIGdldFN0YXRlcygpe1xuICAgICAgcmV0dXJuIFtcbiAgICAgICAge1xuICAgICAgICAgIHN0YXRlOiAnbGFuZGluZy5mZWF0dXJlJyxcbiAgICAgICAgICBjb25maWc6IHtcbiAgICAgICAgICAgICAgdGVtcGxhdGVVcmw6ICdwYW5kYS1mZWF0dXJlLmh0bWwnLFxuICAgICAgICAgICAgICB1cmw6ICcvZmVhdHVyZXMnLFxuICAgICAgICAgICAgICB0aXRsZSA6ICfnlKLlk4HnibnoibInXG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICBdO1xuICAgIH07XG5cbn0pKCk7IiwiKGZ1bmN0aW9uKCl7XG4gIC8qKlxuKiBhcHAuaG9tZSBNb2R1bGVcbipcbiogRGVzY3JpcHRpb25cbiovXG5hbmd1bGFyXG4gIC5tb2R1bGUoJ2xhbmRpbmcuaG9tZScpXG4gIC5jb250cm9sbGVyKCdIb21lQ29udHJvbGxlcicsSG9tZUNvbnRyb2xsZXIpXG5cbiAgSG9tZUNvbnRyb2xsZXIuJGluamVjdCA9IFsnQWNjb3VudFNlcnZpY2UnXTtcblxuICBmdW5jdGlvbiBIb21lQ29udHJvbGxlcihBY2NvdW50U2VydmljZSl7XG4gICAgdmFyIHZtID0gdGhpcztcbiAgICB2bS5hY2NvdW50ID0ge307XG4gICAgdm0uc3VibWl0ID0gc3VibWl0O1xuICAgIFxuICAgIFxuICAgICQoXCIuaGVhZGxpbmVcIikuaGlkZSgpLmFuaW1hdGUoeyBsZWZ0OlwiMHB4XCIsIG9wYWNpdHk6XCJzaG93XCJ9LCAxNTAwKTtcblxuICAgIGZ1bmN0aW9uIHN1Ym1pdCgpe1xuICAgICAgcmV0dXJuIEFjY291bnRTZXJ2aWNlLnBvc3RBY2NvdW50KHZtLmFjY291bnQpO1xuICAgIH07XG5cbiAgfTtcblxufSkoKTsiLCIoZnVuY3Rpb24oKXtcbiAgJ3VzZSBzdHJpY3QnO1xuICAvKipcbiAgKiBsYW5kaW5nLmhvbWUgTW9kdWxlXG4gICpcbiAgKiBEZXNjcmlwdGlvblxuICAqL1xuICBhbmd1bGFyXG4gICAgLm1vZHVsZSgnbGFuZGluZy5ob21lJylcbiAgICAucnVuKGFwcFJ1bik7XG5cbiAgICAvKiBAbmdJbmplY3QgKi9cblxuICAgIGFwcFJ1bi4kaW5qZWN0ID0gWydyb3V0ZXJIZWxwZXInXTtcblxuICAgIGZ1bmN0aW9uIGFwcFJ1bihyb3V0ZXJIZWxwZXIpIHtcbiAgICAgICAgcm91dGVySGVscGVyLmNvbmZpZ3VyZVN0YXRlKGdldFN0YXRlcygpLCcvJyk7XG4gICAgfTtcblxuICAgIGZ1bmN0aW9uIGdldFN0YXRlcygpIHtcbiAgICAgICAgcmV0dXJuIFtcbiAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICBzdGF0ZTogJ2xhbmRpbmcuaG9tZScsXG4gICAgICAgICAgICAgICAgY29uZmlnOiB7XG4gICAgICAgICAgICAgICAgICAgIHRlbXBsYXRlVXJsOiAncGFuZGEtaG9tZS5odG1sJyxcbiAgICAgICAgICAgICAgICAgICAgdXJsOiAnLycsXG4gICAgICAgICAgICAgICAgICAgIGNvbnRyb2xsZXIgOiAnSG9tZUNvbnRyb2xsZXInLFxuICAgICAgICAgICAgICAgICAgICBjb250cm9sbGVyQXMgOiAnSG9tZUN0cmwnLFxuICAgICAgICAgICAgICAgICAgICB0aXRsZSA6ICfpppbpoIEnXG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICBdO1xuICAgIH07XG5cbn0pKCk7IiwiKGZ1bmN0aW9uKCl7XG4gICd1c2Ugc3RyaWN0JztcblxuICAvKipcbiAgKiBsYW5kaW5nLm5hdmJhciBNb2R1bGVcbiAgKlxuICAqIERlc2NyaXB0aW9uXG4gICovXG4gIGFuZ3VsYXJcbiAgICAubW9kdWxlKCdsYW5kaW5nLm5hdmJhcicpXG4gICAgLmNvbnRyb2xsZXIoJ05hdmJhckNvbnRyb2xsZXInLCBOYXZiYXJDb250cm9sbGVyKTtcblxuICAgIE5hdmJhckNvbnRyb2xsZXIuJGluamVjdCA9IFsnJHVpYk1vZGFsJywnJHdpbmRvdycsJyRzY29wZScsJyR0cmFuc2xhdGUnXTtcblxuICAgIGZ1bmN0aW9uIE5hdmJhckNvbnRyb2xsZXIoJHVpYk1vZGFsLCAkd2luZG93LCRzY29wZSwgJHRyYW5zbGF0ZSl7XG4gICAgICB2YXIgdm0gPSB0aGlzOyBcbiAgICAgIHZtLnNjcm9sbCA9IGZhbHNlO1xuICAgICAgdm0udGV4dCA9IFwiaGVsbG8gZ28gZ29cIjtcbiAgICAgIHZtLm9wZW5SZWdpc3Rlck1vZGFsID0gb3BlblJlZ2lzdGVyTW9kYWw7IFxuXG4gICAgICBmdW5jdGlvbiBvcGVuUmVnaXN0ZXJNb2RhbCgpIHtcbiAgICAgICAgcmV0dXJuICR1aWJNb2RhbC5vcGVuKHtcbiAgICAgICAgICBhbmltYXRpb246IHRydWUsXG4gICAgICAgICAgdGVtcGxhdGVVcmw6ICdyZWdpc3Rlci5tb2RhbC5odG1sJyxcbiAgICAgICAgICBjb250cm9sbGVyIDogJ1JlZ2lzdGVyQ29udHJvbGxlcicsXG4gICAgICAgICAgY29udHJvbGxlckFzIDonUmVnaXN0ZXJDdHJsJyxcbiAgICAgICAgICBzaXplOiAnbWQnXG4gICAgICAgIH0pO1xuICAgICAgfTtcblxuICAgICAgJHRyYW5zbGF0ZSgnVElUTEUnKS50aGVuKGZ1bmN0aW9uICh0aXRsZSkge1xuICAgICAgICAgIGNvbnNvbGUubG9nKHRpdGxlKTtcbiAgICAgIH0pO1xuXG4gICAgICAkKFwiI3RyeVwiKS5vbihcInNjcm9sbHN0YXJ0XCIsZnVuY3Rpb24oKXtcbiAgICAgICAgYWxlcnQoXCJTdGFydGVkIHNjcm9sbGluZyFcIik7XG4gICAgICB9KTtcblxuICAgICAgLy8gYW5ndWxhci5lbGVtZW50KCR3aW5kb3cpLmJpbmQoXCJzY3JvbGxcIiwgZnVuY3Rpb24oZSkge1xuICAgICAgLy8gICAkc2NvcGUuJGFwcGx5KGZ1bmN0aW9uKCl7XG4gICAgICAvLyAgICAgdm0uc2Nyb2xsID0gdHJ1ZTtcbiAgICAgIC8vICAgfSlcbiAgICAgIC8vICAgY29uc29sZS5sb2coXCJzdGFydCB0byBzY3JvbGxcIikgXG4gICAgICAvLyB9KTtcblxuXG4gICAgfTtcblxufSkoKTsiLCIoZnVuY3Rpb24oKXtcbiAgJ3VzZSBzdHJpY3QnO1xuXG4gIC8qKlxuICAqIGFwcC5yZWdpc3RlciBNb2R1bGVcbiAgKlxuICAqIERlc2NyaXB0aW9uXG4gICovXG4gIGFuZ3VsYXJcbiAgICAubW9kdWxlKCdhcHAucmVnaXN0ZXInKVxuICAgIC5jb250cm9sbGVyKCdSZWdpc3RlckNvbnRyb2xsZXInLFJlZ2lzdGVyQ29udHJvbGxlcik7XG5cbiAgICBSZWdpc3RlckNvbnRyb2xsZXIuJGluamVjdCA9IFsnQWNjb3VudFNlcnZpY2UnLCckdWliTW9kYWxJbnN0YW5jZSddO1xuXG4gICAgZnVuY3Rpb24gUmVnaXN0ZXJDb250cm9sbGVyKEFjY291bnRTZXJ2aWNlLCR1aWJNb2RhbEluc3RhbmNlKXtcbiAgICAgIHZhciB2bSA9IHRoaXM7IFxuICAgICAgdm0uYWNjb3VudCA9IHt9O1xuICAgICAgdm0uc3VibWl0QWNjb3VudCA9IHN1Ym1pdEFjY291bnQ7XG4gICAgICB2bS5jYW5jZWwgPSBjYW5jZWw7IFxuXG4gICAgICBmdW5jdGlvbiBzdWJtaXRBY2NvdW50KCl7XG4gICAgICAgXG4gICAgICAgIEFjY291bnRTZXJ2aWNlLnBvc3RBY2NvdW50KHZtLmFjY291bnQpLnRoZW4oZnVuY3Rpb24ocmVzKXtcbiAgICAgICAgICBpZiAocmVzKSB7XG4gICAgICAgICAgICAkdWliTW9kYWxJbnN0YW5jZS5kaXNtaXNzKCdjYW5jZWwnKTtcbiAgICAgICAgICB9O1xuICAgICAgICB9KTtcbiAgICAgIH07XG5cbiAgICAgIGZ1bmN0aW9uIGNhbmNlbCgpe1xuICAgICAgICAkdWliTW9kYWxJbnN0YW5jZS5kaXNtaXNzKCdjYW5jZWwnKTtcbiAgICAgIH07XG4gICAgfTtcblxufSkoKTsiXSwic291cmNlUm9vdCI6Ii9zb3VyY2UvIn0=
