(function(){
  'use strict';
    /**
  * app Module
  *
  * Description
  */
  angular.module('pandaApp', [
    'app.core',
    'app.landing',
    'app.demo',
    'app.signup',
    'pascalprecht.translate'
  ]);
})();
(function(){
  'use strict';
  /**
  * app.core Module
  *
  * Description
  */
  angular
    .module('app.core',[
      'blocks.router',
      'ui.router'
      ])
})();
(function(){
  'use strict';

  /**
  * landing.demo Module
  *
  * Description
  */
  angular
    .module('app.demo', []);
})();
(function(){
  'use strict';

  /**
  * app.landing Module
  *
  * Description
  */
  angular.module('app.landing',[
      'app.core',
      'landing.home',
      'landing.about',
      'landing.career',
      'landing.navbar',
      'landing.feature',
     
    ])
})();
(function(){
  'use strict';
  /**
  * landing.signup Module
  *
  * Description
  */
  angular
    .module('app.signup', []);
})();
(function(){
  'use strict';
 /**
 * blocks.router Module
 *
 * Description
 */
  
  angular.module('blocks.router', [
    'ui.router'
    ]);
})();
(function(){
  'use strict';
  /**
  * landing.about Module
  *
  * Description
  */
  angular
    .module('landing.about', [
      'app.core'
    ])
})();
(function(){
  'use strict';
  /**
  * app.career Module
  *
  * Description
  */
  angular
    .module('landing.career',[
      'app.core',
      'ui.router'
    ]);
})();
(function(){
  'use strict';
  /**
  * landing.feature Module
  *
  * Description
  */
  angular
    .module('landing.feature', [])
})();
(function(){
  /**
  * app.panda-home Module
  *
  * Description
  */
  angular
    .module('landing.home',[
      'app.core'
    ])

})();
(function(){
  'use strict';
  /**
  * landing.navbar Module
  *
  * Description
  */
  angular
    .module('landing.navbar', [
      'ui.bootstrap',
      'app.register'
    ]);
})();
(function(){
  'use strict';

  /**
  * app.register Module
  *
  * Description
  */
  angular
    .module('app.register', [
      'ui.bootstrap'
    ]);
})();
(function(){
  'use strict';
  /**
  * app Module
  *
  * Description
  */
  angular
    .module('pandaApp')
    .config(appConfig);

    appConfig.$inject = ['$translateProvider'];

    function appConfig($translateProvider){
      $translateProvider.translations('en', {
        TITLE: 'MarketPanda'
      });

      $translateProvider.translations('zh-t',{
        TITLE: '市場熊貓'
      });

      $translateProvider.translations('zh-s',{
        TITLE: '市场熊猫'
      });
    };

})();
(function(){
  'use strict';
  /**
  * landing.demo Module
  *
  * Description
  */
  angular
    .module('app.demo')
    .run(appRun);

    appRun.$inject = ['routerHelper'];

    function appRun(routerHelper){
      routerHelper.configureState(getStates());
    };

   function getStates() {
        return [
            {
                state: 'demo',
                config: {
                    templateUrl: 'panda-demo.html',
                    url: '/demo',
                    controller : 'DemoController',
                    controllerAs : 'DemoCtrl',
                    title : '请求演示'
                }
            }
        ];
    };


})();
(function(){
  'use strict';
  /**
  * landing.demo Module
  *
  * Description
  */
  angular
    .module('app.demo')
    .controller('DemoController',DemoController);

    DemoController.$inject = [];

    function DemoController(){

    };

})();
(function(){
  'use strict';
  /**
  * app.landing Module
  *
  * Description
  */
    angular
    .module('app.landing')
    .run(appRun);

    appRun.$inject = ['routerHelper'];

    function appRun( routerHelper ){
      routerHelper.configureState(getStates());
    };

    function getStates(){
      return [
        {
          state: 'landing',
          config: {
              abstract : true,
              templateUrl: './common/content.html'
          }
        }
      ];
    };
})();
(function(){
  'use strict';

  /**
  * landing.signup Module
  *
  * Description
  */
  angular
    .module('app.signup')
    .controller('SignupController',SignupController);

    SignupController.$inject = ['AccountService'];

    function SignupController(AccountService){

    };
})();
(function(){
  'use strict';
  /**
  * landing.signup Module
  *
  * Description
  */

  angular
    .module('app.signup')
    .run(appRun);

    appRun.$inject = ['routerHelper'];

    function appRun( routerHelper ){
      routerHelper.configureState(getStates());
    };

    function getStates() {
        return [
            {
                state: 'signup',
                config: {
                    templateUrl: 'panda-signup.html',
                    url: '/signup',
                    controller : 'SignupController',
                    controllerAs : 'SignupCtrl',
                    title : '注册'
                }
            }
        ];
    };

})();
(function(){
  'use strict';
  /**
  * app.core Module
  *
  * Description
  */
  angular
    .module('app.core')
    .factory('AccountService',AccountService);

    AccountService.$inject = ['$http'];

    function AccountService($http){
        return {
          postAccount : postAccount
        };

        function postAccount(account){
          return $http.post('/api/accounts', account)
                  .then(postSuccess)
                  .catch(postFailed);

          function postSuccess(res){
            return res.data;
          };

          function postFailed(res){
            return console.log(res);
          };

        }; 
    };

})();
(function(){
  'use strict';

  /**
  * blocks.router Module
  *
  * Description
  */
  angular
    .module('blocks.router')
    .provider('routerHelper',routerHelperProvider);

    routerHelperProvider.$inject = ['$locationProvider','$stateProvider','$urlRouterProvider'];

  function routerHelperProvider($locationProvider,$stateProvider,$urlRouterProvider){

    var config = {
      docTitle : 'ConvertLab'
    }

    // $locationProvider.html5Mode({
    //   enabled: true,
    //   requireBase: false
    // });

    this.$get = RouterHelper;

    RouterHelper.$inject = ['$state','$rootScope'];

    function RouterHelper($state, $rootScope){
      var hasOtherwise = false; 

      var service = {
        configureState : configureState,
        getStates : getStates
      };

      init();

      return service;

      function configureState(states, otherwisePath){
        states.forEach(function(state){
          $stateProvider.state(state.state,state.config);
        });

        if ( otherwisePath && !hasOtherwise) {
          hasOtherwise = true; 
          $urlRouterProvider.otherwise(otherwisePath);
        };
      };
      function getStates(){ return $state.get()};

      function init(){
        updateDocTitle();
      };

      function updateDocTitle(){
        $rootScope.$on('$stateChangeSuccess',
          function(event, toState, toParams, fromState, fromParams){
            var title = config.docTitle + ' | ' + (toState.title || '');
            document.body.scrollTop = document.documentElement.scrollTop = 0;
            $rootScope.title = title;

            // tracking code
            _cl_tracker.init();
            _cl_tracker.push({ url: toState.url, targetName: title });
            _cl_tracker.track('open_page');
          });
      };
    };
  };

})();

(function(){
  'use strict';
  /**
* landing.about Module
*
* Description
*/
angular
  .module('landing.about')
  .controller('AboutController',AboutController)

  AboutController.$inject = ['$rootScope'];

  function AboutController($rootScope){
    var vm = this; 
    var top = $("#career").offset().top  - 3.5*parseFloat($('#career').css('marginTop').replace(/auto/,0));
    $('#joinus').click(function () {
        $('html,body').animate({scrollTop:top}, 500);
    });

  };

})();

(function(){
  'use strict';

  /**
  * landing.home Module
  *
  * Description
  */
  angular
    .module('landing.about')
    .run(appRun);

    appRun.$inject = ['routerHelper'];

    function appRun( routerHelper ){
      routerHelper.configureState(getStates());
    }

    function getStates() {
        return [
            {
                state: 'landing.about',
                config: {
                    templateUrl: 'panda-about.html',
                    url: '/about',
                    controller : 'AboutController',
                    controllerAs : 'AboutCtrl',
                    title : '关於我们'
                }
            }
        ];
    };
    
})();

(function(){
  'use strict';
  
  /**
  * app.career Module
  *
  * Description
  */
  angular
    .module('landing.career')
    .run(appRun);

    appRun.$inject = ['routerHelper'];

    function appRun( routerHelper ){
      routerHelper.configureState(getStates());
    };

    function getStates(){
      return [
        {
          state: 'landing.careers',
          config: {
              templateUrl: 'panda-career.html',
              url: '/careers/:id',
              title : '职缺招聘'
          }
        }
      ];
    };

})();
(function(){
  'use strict';
    /**
  * panadaApp Module
  *
  * Description
  */
  angular
    .module('landing.career')
    .controller('CareerController',CareerController);

    CareerController.$inject = [];

    function CareerController(){
      var vm = this; 
      // vm.careerId = $stateParams.id;
      console.log("it is career page");
    };

})();



(function(){
  'use strict';
  /**
  * landing.feature Module
  *
  * Description
  */
  angular
    .module('landing.feature')
    .controller('FeatureController',FeatureController);

    FeatureController.$inject = [];

    function FeatureController(){
      
    };

})();
(function(){
  'use strict';

  /**
  * landing.feature Module
  *
  * Description
  */
   angular
    .module('landing.feature')
    .run(appRun);

    appRun.$inject = ['routerHelper'];

    function appRun( routerHelper ){
      routerHelper.configureState(getStates());
    };

    function getStates(){
      return [
        {
          state: 'landing.feature',
          config: {
              templateUrl: 'panda-feature.html',
              url: '/features',
              title : '产品特色'
          }
        }
      ];
    };

})();
(function(){
  /**
* app.home Module
*
* Description
*/
angular
  .module('landing.home')
  .controller('HomeController',HomeController)

  HomeController.$inject = ['AccountService'];

  function HomeController(AccountService){
    var vm = this;
    vm.account = {};
    vm.submit = submit;
    
    
    $(".headline").hide().animate({ left:"0px", opacity:"show"}, 1500);

    function submit(){
      return AccountService.postAccount(vm.account);
    };

  };

})();
(function(){
  'use strict';
  /**
  * landing.home Module
  *
  * Description
  */
  angular
    .module('landing.home')
    .run(appRun);

    /* @ngInject */

    appRun.$inject = ['routerHelper'];

    function appRun(routerHelper) {
        routerHelper.configureState(getStates(),'/');
    };

    function getStates() {
        return [
            {
                state: 'landing.home',
                config: {
                    templateUrl: 'panda-home.html',
                    url: '/',
                    controller : 'HomeController',
                    controllerAs : 'HomeCtrl',
                    title : '首页'
                }
            }
        ];
    };

})();
(function(){
  'use strict';

  /**
  * landing.navbar Module
  *
  * Description
  */
  angular
    .module('landing.navbar')
    .controller('NavbarController', NavbarController);

    NavbarController.$inject = ['$uibModal','$window','$scope','$translate'];

    function NavbarController($uibModal, $window,$scope, $translate){
      var vm = this; 
      vm.scroll = false;
      vm.text = "hello go go";
      vm.openRegisterModal = openRegisterModal; 

      function openRegisterModal() {
        return $uibModal.open({
          animation: true,
          templateUrl: 'register.modal.html',
          controller : 'RegisterController',
          controllerAs :'RegisterCtrl',
          size: 'md'
        });
      };

      $translate('TITLE').then(function (title) {
          console.log(title);
      });

      $("#try").on("scrollstart",function(){
        alert("Started scrolling!");
      });

      // angular.element($window).bind("scroll", function(e) {
      //   $scope.$apply(function(){
      //     vm.scroll = true;
      //   })
      //   console.log("start to scroll") 
      // });


    };

})();
(function(){
  'use strict';

  /**
  * app.register Module
  *
  * Description
  */
  angular
    .module('app.register')
    .controller('RegisterController',RegisterController);

    RegisterController.$inject = ['AccountService','$uibModalInstance'];

    function RegisterController(AccountService,$uibModalInstance){
      var vm = this; 
      vm.account = {};
      vm.submitAccount = submitAccount;
      vm.cancel = cancel; 

      function submitAccount(){
       
        AccountService.postAccount(vm.account).then(function(res){
          if (res) {
            $uibModalInstance.dismiss('cancel');
          };
        });
      };

      function cancel(){
        $uibModalInstance.dismiss('cancel');
      };
    };

})();
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImFwcC5tb2R1bGUuanMiLCJjb3Jlcy9jb3JlLm1vZHVsZS5qcyIsImRlbW8vZGVtby5tb2R1bGUuanMiLCJsYW5kaW5nL2xhbmRpbmcubW9kdWxlLmpzIiwic2lnbnVwL3NpZ251cC5tb2R1bGUuanMiLCJibG9jay9yb3V0ZXIvcm91dGVyLm1vZHVsZS5qcyIsImxhbmRpbmcvYWJvdXQvYWJvdXQubW9kdWxlLmpzIiwibGFuZGluZy9jYXJlZXIvY2FyZWVyLm1vZHVsZS5qcyIsImxhbmRpbmcvZmVhdHVyZS9mZWF0dXJlLm1vZHVsZS5qcyIsImxhbmRpbmcvaG9tZS9ob21lLm1vZHVsZS5qcyIsImxhbmRpbmcvbmF2YmFyL25hdmJhci5tb2R1bGUuanMiLCJtb2RhbC9yZWdpc3Rlci9yZWdpc3Rlci5tb2R1bGUuanMiLCJhcHAuY29uZmlnLmpzIiwiZGVtby9kZW1vLnJvdXRlci5qcyIsImRlbW8vZGVtb24uY3RybC5qcyIsImxhbmRpbmcvbGFuZGluZy5yb3V0ZXIuanMiLCJzaWdudXAvc2lnbnVwLmN0cmwuanMiLCJzaWdudXAvc2lnbnVwLnJvdXRlLmpzIiwiY29yZXMvZGF0YVNlcnZpY2UvYWNjb3VudC5zZXJ2aWNlLmpzIiwiYmxvY2svcm91dGVyL3JvdXRlci1oZWxwZXIucHJvdmlkZXIuanMiLCJsYW5kaW5nL2Fib3V0L2Fib3V0LmN0cmwuanMiLCJsYW5kaW5nL2Fib3V0L2Fib3V0LnJvdXRlLmpzIiwibGFuZGluZy9jYXJlZXIvY2FyZWVyLnJvdXRlci5qcyIsImxhbmRpbmcvY2FyZWVyL2NhcnJlci5jdHJsLmpzIiwibGFuZGluZy9mZWF0dXJlL2ZlYXR1cmUuY3RybC5qcyIsImxhbmRpbmcvZmVhdHVyZS9mZWF0dXJlLnJvdXRlci5qcyIsImxhbmRpbmcvaG9tZS9ob21lLmN0cmwuanMiLCJsYW5kaW5nL2hvbWUvaG9tZS5yb3V0ZS5qcyIsImxhbmRpbmcvbmF2YmFyL25hdmJhci5jdHJsLmpzIiwibW9kYWwvcmVnaXN0ZXIvcmVnaXN0ZXIuY3RybC5qcyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFBQSxDQUFBLFVBQUE7RUFDQTs7Ozs7O0VBTUEsUUFBQSxPQUFBLFlBQUE7SUFDQTtJQUNBO0lBQ0E7SUFDQTtJQUNBOzs7QUNaQSxDQUFBLFVBQUE7RUFDQTs7Ozs7O0VBTUE7S0FDQSxPQUFBLFdBQUE7TUFDQTtNQUNBOzs7QUNWQSxDQUFBLFVBQUE7RUFDQTs7Ozs7OztFQU9BO0tBQ0EsT0FBQSxZQUFBOztBQ1RBLENBQUEsVUFBQTtFQUNBOzs7Ozs7O0VBT0EsUUFBQSxPQUFBLGNBQUE7TUFDQTtNQUNBO01BQ0E7TUFDQTtNQUNBO01BQ0E7Ozs7QUNkQSxDQUFBLFVBQUE7RUFDQTs7Ozs7O0VBTUE7S0FDQSxPQUFBLGNBQUE7O0FDUkEsQ0FBQSxVQUFBO0VBQ0E7Ozs7Ozs7RUFPQSxRQUFBLE9BQUEsaUJBQUE7SUFDQTs7O0FDVEEsQ0FBQSxVQUFBO0VBQ0E7Ozs7OztFQU1BO0tBQ0EsT0FBQSxpQkFBQTtNQUNBOzs7QUNUQSxDQUFBLFVBQUE7RUFDQTs7Ozs7O0VBTUE7S0FDQSxPQUFBLGlCQUFBO01BQ0E7TUFDQTs7O0FDVkEsQ0FBQSxVQUFBO0VBQ0E7Ozs7OztFQU1BO0tBQ0EsT0FBQSxtQkFBQTs7QUNSQSxDQUFBLFVBQUE7Ozs7OztFQU1BO0tBQ0EsT0FBQSxlQUFBO01BQ0E7Ozs7QUNSQSxDQUFBLFVBQUE7RUFDQTs7Ozs7O0VBTUE7S0FDQSxPQUFBLGtCQUFBO01BQ0E7TUFDQTs7O0FDVkEsQ0FBQSxVQUFBO0VBQ0E7Ozs7Ozs7RUFPQTtLQUNBLE9BQUEsZ0JBQUE7TUFDQTs7O0FDVkEsQ0FBQSxVQUFBO0VBQ0E7Ozs7OztFQU1BO0tBQ0EsT0FBQTtLQUNBLE9BQUE7O0lBRUEsVUFBQSxVQUFBLENBQUE7O0lBRUEsU0FBQSxVQUFBLG1CQUFBO01BQ0EsbUJBQUEsYUFBQSxNQUFBO1FBQ0EsT0FBQTs7O01BR0EsbUJBQUEsYUFBQSxPQUFBO1FBQ0EsT0FBQTs7O01BR0EsbUJBQUEsYUFBQSxPQUFBO1FBQ0EsT0FBQTs7S0FFQTs7O0FDekJBLENBQUEsVUFBQTtFQUNBOzs7Ozs7RUFNQTtLQUNBLE9BQUE7S0FDQSxJQUFBOztJQUVBLE9BQUEsVUFBQSxDQUFBOztJQUVBLFNBQUEsT0FBQSxhQUFBO01BQ0EsYUFBQSxlQUFBO0tBQ0E7O0dBRUEsU0FBQSxZQUFBO1FBQ0EsT0FBQTtZQUNBO2dCQUNBLE9BQUE7Z0JBQ0EsUUFBQTtvQkFDQSxhQUFBO29CQUNBLEtBQUE7b0JBQ0EsYUFBQTtvQkFDQSxlQUFBO29CQUNBLFFBQUE7Ozs7S0FJQTs7OztBQzlCQSxDQUFBLFVBQUE7RUFDQTs7Ozs7O0VBTUE7S0FDQSxPQUFBO0tBQ0EsV0FBQSxpQkFBQTs7SUFFQSxlQUFBLFVBQUE7O0lBRUEsU0FBQSxnQkFBQTs7S0FFQTs7O0FDZkEsQ0FBQSxVQUFBO0VBQ0E7Ozs7OztJQU1BO0tBQ0EsT0FBQTtLQUNBLElBQUE7O0lBRUEsT0FBQSxVQUFBLENBQUE7O0lBRUEsU0FBQSxRQUFBLGNBQUE7TUFDQSxhQUFBLGVBQUE7S0FDQTs7SUFFQSxTQUFBLFdBQUE7TUFDQSxPQUFBO1FBQ0E7VUFDQSxPQUFBO1VBQ0EsUUFBQTtjQUNBLFdBQUE7Y0FDQSxhQUFBOzs7O0tBSUE7O0FDM0JBLENBQUEsVUFBQTtFQUNBOzs7Ozs7O0VBT0E7S0FDQSxPQUFBO0tBQ0EsV0FBQSxtQkFBQTs7SUFFQSxpQkFBQSxVQUFBLENBQUE7O0lBRUEsU0FBQSxpQkFBQSxlQUFBOztLQUVBOztBQ2hCQSxDQUFBLFVBQUE7RUFDQTs7Ozs7OztFQU9BO0tBQ0EsT0FBQTtLQUNBLElBQUE7O0lBRUEsT0FBQSxVQUFBLENBQUE7O0lBRUEsU0FBQSxRQUFBLGNBQUE7TUFDQSxhQUFBLGVBQUE7S0FDQTs7SUFFQSxTQUFBLFlBQUE7UUFDQSxPQUFBO1lBQ0E7Z0JBQ0EsT0FBQTtnQkFDQSxRQUFBO29CQUNBLGFBQUE7b0JBQ0EsS0FBQTtvQkFDQSxhQUFBO29CQUNBLGVBQUE7b0JBQ0EsUUFBQTs7OztLQUlBOzs7QUMvQkEsQ0FBQSxVQUFBO0VBQ0E7Ozs7OztFQU1BO0tBQ0EsT0FBQTtLQUNBLFFBQUEsaUJBQUE7O0lBRUEsZUFBQSxVQUFBLENBQUE7O0lBRUEsU0FBQSxlQUFBLE1BQUE7UUFDQSxPQUFBO1VBQ0EsY0FBQTs7O1FBR0EsU0FBQSxZQUFBLFFBQUE7VUFDQSxPQUFBLE1BQUEsS0FBQSxpQkFBQTttQkFDQSxLQUFBO21CQUNBLE1BQUE7O1VBRUEsU0FBQSxZQUFBLElBQUE7WUFDQSxPQUFBLElBQUE7V0FDQTs7VUFFQSxTQUFBLFdBQUEsSUFBQTtZQUNBLE9BQUEsUUFBQSxJQUFBO1dBQ0E7O1NBRUE7S0FDQTs7O0FDaENBLENBQUEsVUFBQTtFQUNBOzs7Ozs7O0VBT0E7S0FDQSxPQUFBO0tBQ0EsU0FBQSxlQUFBOztJQUVBLHFCQUFBLFVBQUEsQ0FBQSxvQkFBQSxpQkFBQTs7RUFFQSxTQUFBLHFCQUFBLGtCQUFBLGVBQUEsbUJBQUE7O0lBRUEsSUFBQSxTQUFBO01BQ0EsV0FBQTs7Ozs7Ozs7SUFRQSxLQUFBLE9BQUE7O0lBRUEsYUFBQSxVQUFBLENBQUEsU0FBQTs7SUFFQSxTQUFBLGFBQUEsUUFBQSxXQUFBO01BQ0EsSUFBQSxlQUFBOztNQUVBLElBQUEsVUFBQTtRQUNBLGlCQUFBO1FBQ0EsWUFBQTs7O01BR0E7O01BRUEsT0FBQTs7TUFFQSxTQUFBLGVBQUEsUUFBQSxjQUFBO1FBQ0EsT0FBQSxRQUFBLFNBQUEsTUFBQTtVQUNBLGVBQUEsTUFBQSxNQUFBLE1BQUEsTUFBQTs7O1FBR0EsS0FBQSxpQkFBQSxDQUFBLGNBQUE7VUFDQSxlQUFBO1VBQ0EsbUJBQUEsVUFBQTtTQUNBO09BQ0E7TUFDQSxTQUFBLFdBQUEsRUFBQSxPQUFBLE9BQUEsTUFBQTs7TUFFQSxTQUFBLE1BQUE7UUFDQTtPQUNBOztNQUVBLFNBQUEsZ0JBQUE7UUFDQSxXQUFBLElBQUE7VUFDQSxTQUFBLE9BQUEsU0FBQSxVQUFBLFdBQUEsV0FBQTtZQUNBLElBQUEsUUFBQSxPQUFBLFdBQUEsU0FBQSxRQUFBLFNBQUE7WUFDQSxTQUFBLEtBQUEsWUFBQSxTQUFBLGdCQUFBLFlBQUE7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QUFBLFNBQUE7O0lBRUEsU0FBQSxpQkFBQSxXQUFBLFFBQUEsUUFBQSxXQUFBO01BQ0EsSUFBQSxLQUFBO01BQ0EsR0FBQSxTQUFBO01BQ0EsR0FBQSxPQUFBO01BQ0EsR0FBQSxvQkFBQTs7TUFFQSxTQUFBLG9CQUFBO1FBQ0EsT0FBQSxVQUFBLEtBQUE7VUFDQSxXQUFBO1VBQ0EsYUFBQTtVQUNBLGFBQUE7VUFDQSxjQUFBO1VBQ0EsTUFBQTs7T0FFQTs7TUFFQSxXQUFBLFNBQUEsS0FBQSxVQUFBLE9BQUE7VUFDQSxRQUFBLElBQUE7OztNQUdBLEVBQUEsUUFBQSxHQUFBLGNBQUEsVUFBQTtRQUNBLE1BQUE7Ozs7Ozs7Ozs7O0tBV0E7OztBQzlDQSxDQUFBLFVBQUE7RUFDQTs7Ozs7OztFQU9BO0tBQ0EsT0FBQTtLQUNBLFdBQUEscUJBQUE7O0lBRUEsbUJBQUEsVUFBQSxDQUFBLGlCQUFBOztJQUVBLFNBQUEsbUJBQUEsZUFBQSxrQkFBQTtNQUNBLElBQUEsS0FBQTtNQUNBLEdBQUEsVUFBQTtNQUNBLEdBQUEsZ0JBQUE7TUFDQSxHQUFBLFNBQUE7O01BRUEsU0FBQSxlQUFBOztRQUVBLGVBQUEsWUFBQSxHQUFBLFNBQUEsS0FBQSxTQUFBLElBQUE7VUFDQSxJQUFBLEtBQUE7WUFDQSxrQkFBQSxRQUFBO1dBQ0E7O09BRUE7O01BRUEsU0FBQSxRQUFBO1FBQ0Esa0JBQUEsUUFBQTtPQUNBO0tBQ0E7O0tBRUEiLCJmaWxlIjoiYXBwLm1pbi5qcyIsInNvdXJjZXNDb250ZW50IjpbIihmdW5jdGlvbigpe1xuICAndXNlIHN0cmljdCc7XG4gICAgLyoqXG4gICogYXBwIE1vZHVsZVxuICAqXG4gICogRGVzY3JpcHRpb25cbiAgKi9cbiAgYW5ndWxhci5tb2R1bGUoJ3BhbmRhQXBwJywgW1xuICAgICdhcHAuY29yZScsXG4gICAgJ2FwcC5sYW5kaW5nJyxcbiAgICAnYXBwLmRlbW8nLFxuICAgICdhcHAuc2lnbnVwJyxcbiAgICAncGFzY2FscHJlY2h0LnRyYW5zbGF0ZSdcbiAgXSk7XG59KSgpOyIsIihmdW5jdGlvbigpe1xuICAndXNlIHN0cmljdCc7XG4gIC8qKlxuICAqIGFwcC5jb3JlIE1vZHVsZVxuICAqXG4gICogRGVzY3JpcHRpb25cbiAgKi9cbiAgYW5ndWxhclxuICAgIC5tb2R1bGUoJ2FwcC5jb3JlJyxbXG4gICAgICAnYmxvY2tzLnJvdXRlcicsXG4gICAgICAndWkucm91dGVyJ1xuICAgICAgXSlcbn0pKCk7IiwiKGZ1bmN0aW9uKCl7XG4gICd1c2Ugc3RyaWN0JztcblxuICAvKipcbiAgKiBsYW5kaW5nLmRlbW8gTW9kdWxlXG4gICpcbiAgKiBEZXNjcmlwdGlvblxuICAqL1xuICBhbmd1bGFyXG4gICAgLm1vZHVsZSgnYXBwLmRlbW8nLCBbXSk7XG59KSgpOyIsIihmdW5jdGlvbigpe1xuICAndXNlIHN0cmljdCc7XG5cbiAgLyoqXG4gICogYXBwLmxhbmRpbmcgTW9kdWxlXG4gICpcbiAgKiBEZXNjcmlwdGlvblxuICAqL1xuICBhbmd1bGFyLm1vZHVsZSgnYXBwLmxhbmRpbmcnLFtcbiAgICAgICdhcHAuY29yZScsXG4gICAgICAnbGFuZGluZy5ob21lJyxcbiAgICAgICdsYW5kaW5nLmFib3V0JyxcbiAgICAgICdsYW5kaW5nLmNhcmVlcicsXG4gICAgICAnbGFuZGluZy5uYXZiYXInLFxuICAgICAgJ2xhbmRpbmcuZmVhdHVyZScsXG4gICAgIFxuICAgIF0pXG59KSgpOyIsIihmdW5jdGlvbigpe1xuICAndXNlIHN0cmljdCc7XG4gIC8qKlxuICAqIGxhbmRpbmcuc2lnbnVwIE1vZHVsZVxuICAqXG4gICogRGVzY3JpcHRpb25cbiAgKi9cbiAgYW5ndWxhclxuICAgIC5tb2R1bGUoJ2FwcC5zaWdudXAnLCBbXSk7XG59KSgpOyIsIihmdW5jdGlvbigpe1xuICAndXNlIHN0cmljdCc7XG4gLyoqXG4gKiBibG9ja3Mucm91dGVyIE1vZHVsZVxuICpcbiAqIERlc2NyaXB0aW9uXG4gKi9cbiAgXG4gIGFuZ3VsYXIubW9kdWxlKCdibG9ja3Mucm91dGVyJywgW1xuICAgICd1aS5yb3V0ZXInXG4gICAgXSk7XG59KSgpOyIsIihmdW5jdGlvbigpe1xuICAndXNlIHN0cmljdCc7XG4gIC8qKlxuICAqIGxhbmRpbmcuYWJvdXQgTW9kdWxlXG4gICpcbiAgKiBEZXNjcmlwdGlvblxuICAqL1xuICBhbmd1bGFyXG4gICAgLm1vZHVsZSgnbGFuZGluZy5hYm91dCcsIFtcbiAgICAgICdhcHAuY29yZSdcbiAgICBdKVxufSkoKTsiLCIoZnVuY3Rpb24oKXtcbiAgJ3VzZSBzdHJpY3QnO1xuICAvKipcbiAgKiBhcHAuY2FyZWVyIE1vZHVsZVxuICAqXG4gICogRGVzY3JpcHRpb25cbiAgKi9cbiAgYW5ndWxhclxuICAgIC5tb2R1bGUoJ2xhbmRpbmcuY2FyZWVyJyxbXG4gICAgICAnYXBwLmNvcmUnLFxuICAgICAgJ3VpLnJvdXRlcidcbiAgICBdKTtcbn0pKCk7IiwiKGZ1bmN0aW9uKCl7XG4gICd1c2Ugc3RyaWN0JztcbiAgLyoqXG4gICogbGFuZGluZy5mZWF0dXJlIE1vZHVsZVxuICAqXG4gICogRGVzY3JpcHRpb25cbiAgKi9cbiAgYW5ndWxhclxuICAgIC5tb2R1bGUoJ2xhbmRpbmcuZmVhdHVyZScsIFtdKVxufSkoKTsiLCIoZnVuY3Rpb24oKXtcbiAgLyoqXG4gICogYXBwLnBhbmRhLWhvbWUgTW9kdWxlXG4gICpcbiAgKiBEZXNjcmlwdGlvblxuICAqL1xuICBhbmd1bGFyXG4gICAgLm1vZHVsZSgnbGFuZGluZy5ob21lJyxbXG4gICAgICAnYXBwLmNvcmUnXG4gICAgXSlcblxufSkoKTsiLCIoZnVuY3Rpb24oKXtcbiAgJ3VzZSBzdHJpY3QnO1xuICAvKipcbiAgKiBsYW5kaW5nLm5hdmJhciBNb2R1bGVcbiAgKlxuICAqIERlc2NyaXB0aW9uXG4gICovXG4gIGFuZ3VsYXJcbiAgICAubW9kdWxlKCdsYW5kaW5nLm5hdmJhcicsIFtcbiAgICAgICd1aS5ib290c3RyYXAnLFxuICAgICAgJ2FwcC5yZWdpc3RlcidcbiAgICBdKTtcbn0pKCk7IiwiKGZ1bmN0aW9uKCl7XG4gICd1c2Ugc3RyaWN0JztcblxuICAvKipcbiAgKiBhcHAucmVnaXN0ZXIgTW9kdWxlXG4gICpcbiAgKiBEZXNjcmlwdGlvblxuICAqL1xuICBhbmd1bGFyXG4gICAgLm1vZHVsZSgnYXBwLnJlZ2lzdGVyJywgW1xuICAgICAgJ3VpLmJvb3RzdHJhcCdcbiAgICBdKTtcbn0pKCk7IiwiKGZ1bmN0aW9uKCl7XG4gICd1c2Ugc3RyaWN0JztcbiAgLyoqXG4gICogYXBwIE1vZHVsZVxuICAqXG4gICogRGVzY3JpcHRpb25cbiAgKi9cbiAgYW5ndWxhclxuICAgIC5tb2R1bGUoJ3BhbmRhQXBwJylcbiAgICAuY29uZmlnKGFwcENvbmZpZyk7XG5cbiAgICBhcHBDb25maWcuJGluamVjdCA9IFsnJHRyYW5zbGF0ZVByb3ZpZGVyJ107XG5cbiAgICBmdW5jdGlvbiBhcHBDb25maWcoJHRyYW5zbGF0ZVByb3ZpZGVyKXtcbiAgICAgICR0cmFuc2xhdGVQcm92aWRlci50cmFuc2xhdGlvbnMoJ2VuJywge1xuICAgICAgICBUSVRMRTogJ01hcmtldFBhbmRhJ1xuICAgICAgfSk7XG5cbiAgICAgICR0cmFuc2xhdGVQcm92aWRlci50cmFuc2xhdGlvbnMoJ3poLXQnLHtcbiAgICAgICAgVElUTEU6ICfluILloLTnhorospMnXG4gICAgICB9KTtcblxuICAgICAgJHRyYW5zbGF0ZVByb3ZpZGVyLnRyYW5zbGF0aW9ucygnemgtcycse1xuICAgICAgICBUSVRMRTogJ+W4guWcuueGiueMqydcbiAgICAgIH0pO1xuICAgIH07XG5cbn0pKCk7IiwiKGZ1bmN0aW9uKCl7XG4gICd1c2Ugc3RyaWN0JztcbiAgLyoqXG4gICogbGFuZGluZy5kZW1vIE1vZHVsZVxuICAqXG4gICogRGVzY3JpcHRpb25cbiAgKi9cbiAgYW5ndWxhclxuICAgIC5tb2R1bGUoJ2FwcC5kZW1vJylcbiAgICAucnVuKGFwcFJ1bik7XG5cbiAgICBhcHBSdW4uJGluamVjdCA9IFsncm91dGVySGVscGVyJ107XG5cbiAgICBmdW5jdGlvbiBhcHBSdW4ocm91dGVySGVscGVyKXtcbiAgICAgIHJvdXRlckhlbHBlci5jb25maWd1cmVTdGF0ZShnZXRTdGF0ZXMoKSk7XG4gICAgfTtcblxuICAgZnVuY3Rpb24gZ2V0U3RhdGVzKCkge1xuICAgICAgICByZXR1cm4gW1xuICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgIHN0YXRlOiAnZGVtbycsXG4gICAgICAgICAgICAgICAgY29uZmlnOiB7XG4gICAgICAgICAgICAgICAgICAgIHRlbXBsYXRlVXJsOiAncGFuZGEtZGVtby5odG1sJyxcbiAgICAgICAgICAgICAgICAgICAgdXJsOiAnL2RlbW8nLFxuICAgICAgICAgICAgICAgICAgICBjb250cm9sbGVyIDogJ0RlbW9Db250cm9sbGVyJyxcbiAgICAgICAgICAgICAgICAgICAgY29udHJvbGxlckFzIDogJ0RlbW9DdHJsJyxcbiAgICAgICAgICAgICAgICAgICAgdGl0bGUgOiAn6K+35rGC5ryU56S6J1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgXTtcbiAgICB9O1xuXG5cbn0pKCk7IiwiKGZ1bmN0aW9uKCl7XG4gICd1c2Ugc3RyaWN0JztcbiAgLyoqXG4gICogbGFuZGluZy5kZW1vIE1vZHVsZVxuICAqXG4gICogRGVzY3JpcHRpb25cbiAgKi9cbiAgYW5ndWxhclxuICAgIC5tb2R1bGUoJ2FwcC5kZW1vJylcbiAgICAuY29udHJvbGxlcignRGVtb0NvbnRyb2xsZXInLERlbW9Db250cm9sbGVyKTtcblxuICAgIERlbW9Db250cm9sbGVyLiRpbmplY3QgPSBbXTtcblxuICAgIGZ1bmN0aW9uIERlbW9Db250cm9sbGVyKCl7XG5cbiAgICB9O1xuXG59KSgpOyIsIihmdW5jdGlvbigpe1xuICAndXNlIHN0cmljdCc7XG4gIC8qKlxuICAqIGFwcC5sYW5kaW5nIE1vZHVsZVxuICAqXG4gICogRGVzY3JpcHRpb25cbiAgKi9cbiAgICBhbmd1bGFyXG4gICAgLm1vZHVsZSgnYXBwLmxhbmRpbmcnKVxuICAgIC5ydW4oYXBwUnVuKTtcblxuICAgIGFwcFJ1bi4kaW5qZWN0ID0gWydyb3V0ZXJIZWxwZXInXTtcblxuICAgIGZ1bmN0aW9uIGFwcFJ1biggcm91dGVySGVscGVyICl7XG4gICAgICByb3V0ZXJIZWxwZXIuY29uZmlndXJlU3RhdGUoZ2V0U3RhdGVzKCkpO1xuICAgIH07XG5cbiAgICBmdW5jdGlvbiBnZXRTdGF0ZXMoKXtcbiAgICAgIHJldHVybiBbXG4gICAgICAgIHtcbiAgICAgICAgICBzdGF0ZTogJ2xhbmRpbmcnLFxuICAgICAgICAgIGNvbmZpZzoge1xuICAgICAgICAgICAgICBhYnN0cmFjdCA6IHRydWUsXG4gICAgICAgICAgICAgIHRlbXBsYXRlVXJsOiAnLi9jb21tb24vY29udGVudC5odG1sJ1xuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgXTtcbiAgICB9O1xufSkoKTsiLCIoZnVuY3Rpb24oKXtcbiAgJ3VzZSBzdHJpY3QnO1xuXG4gIC8qKlxuICAqIGxhbmRpbmcuc2lnbnVwIE1vZHVsZVxuICAqXG4gICogRGVzY3JpcHRpb25cbiAgKi9cbiAgYW5ndWxhclxuICAgIC5tb2R1bGUoJ2FwcC5zaWdudXAnKVxuICAgIC5jb250cm9sbGVyKCdTaWdudXBDb250cm9sbGVyJyxTaWdudXBDb250cm9sbGVyKTtcblxuICAgIFNpZ251cENvbnRyb2xsZXIuJGluamVjdCA9IFsnQWNjb3VudFNlcnZpY2UnXTtcblxuICAgIGZ1bmN0aW9uIFNpZ251cENvbnRyb2xsZXIoQWNjb3VudFNlcnZpY2Upe1xuXG4gICAgfTtcbn0pKCk7IiwiKGZ1bmN0aW9uKCl7XG4gICd1c2Ugc3RyaWN0JztcbiAgLyoqXG4gICogbGFuZGluZy5zaWdudXAgTW9kdWxlXG4gICpcbiAgKiBEZXNjcmlwdGlvblxuICAqL1xuXG4gIGFuZ3VsYXJcbiAgICAubW9kdWxlKCdhcHAuc2lnbnVwJylcbiAgICAucnVuKGFwcFJ1bik7XG5cbiAgICBhcHBSdW4uJGluamVjdCA9IFsncm91dGVySGVscGVyJ107XG5cbiAgICBmdW5jdGlvbiBhcHBSdW4oIHJvdXRlckhlbHBlciApe1xuICAgICAgcm91dGVySGVscGVyLmNvbmZpZ3VyZVN0YXRlKGdldFN0YXRlcygpKTtcbiAgICB9O1xuXG4gICAgZnVuY3Rpb24gZ2V0U3RhdGVzKCkge1xuICAgICAgICByZXR1cm4gW1xuICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgIHN0YXRlOiAnc2lnbnVwJyxcbiAgICAgICAgICAgICAgICBjb25maWc6IHtcbiAgICAgICAgICAgICAgICAgICAgdGVtcGxhdGVVcmw6ICdwYW5kYS1zaWdudXAuaHRtbCcsXG4gICAgICAgICAgICAgICAgICAgIHVybDogJy9zaWdudXAnLFxuICAgICAgICAgICAgICAgICAgICBjb250cm9sbGVyIDogJ1NpZ251cENvbnRyb2xsZXInLFxuICAgICAgICAgICAgICAgICAgICBjb250cm9sbGVyQXMgOiAnU2lnbnVwQ3RybCcsXG4gICAgICAgICAgICAgICAgICAgIHRpdGxlIDogJ+azqOWGjCdcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgIF07XG4gICAgfTtcblxufSkoKTsiLCIoZnVuY3Rpb24oKXtcbiAgJ3VzZSBzdHJpY3QnO1xuICAvKipcbiAgKiBhcHAuY29yZSBNb2R1bGVcbiAgKlxuICAqIERlc2NyaXB0aW9uXG4gICovXG4gIGFuZ3VsYXJcbiAgICAubW9kdWxlKCdhcHAuY29yZScpXG4gICAgLmZhY3RvcnkoJ0FjY291bnRTZXJ2aWNlJyxBY2NvdW50U2VydmljZSk7XG5cbiAgICBBY2NvdW50U2VydmljZS4kaW5qZWN0ID0gWyckaHR0cCddO1xuXG4gICAgZnVuY3Rpb24gQWNjb3VudFNlcnZpY2UoJGh0dHApe1xuICAgICAgICByZXR1cm4ge1xuICAgICAgICAgIHBvc3RBY2NvdW50IDogcG9zdEFjY291bnRcbiAgICAgICAgfTtcblxuICAgICAgICBmdW5jdGlvbiBwb3N0QWNjb3VudChhY2NvdW50KXtcbiAgICAgICAgICByZXR1cm4gJGh0dHAucG9zdCgnL2FwaS9hY2NvdW50cycsIGFjY291bnQpXG4gICAgICAgICAgICAgICAgICAudGhlbihwb3N0U3VjY2VzcylcbiAgICAgICAgICAgICAgICAgIC5jYXRjaChwb3N0RmFpbGVkKTtcblxuICAgICAgICAgIGZ1bmN0aW9uIHBvc3RTdWNjZXNzKHJlcyl7XG4gICAgICAgICAgICByZXR1cm4gcmVzLmRhdGE7XG4gICAgICAgICAgfTtcblxuICAgICAgICAgIGZ1bmN0aW9uIHBvc3RGYWlsZWQocmVzKXtcbiAgICAgICAgICAgIHJldHVybiBjb25zb2xlLmxvZyhyZXMpO1xuICAgICAgICAgIH07XG5cbiAgICAgICAgfTsgXG4gICAgfTtcblxufSkoKTsiLCIoZnVuY3Rpb24oKXtcbiAgJ3VzZSBzdHJpY3QnO1xuXG4gIC8qKlxuICAqIGJsb2Nrcy5yb3V0ZXIgTW9kdWxlXG4gICpcbiAgKiBEZXNjcmlwdGlvblxuICAqL1xuICBhbmd1bGFyXG4gICAgLm1vZHVsZSgnYmxvY2tzLnJvdXRlcicpXG4gICAgLnByb3ZpZGVyKCdyb3V0ZXJIZWxwZXInLHJvdXRlckhlbHBlclByb3ZpZGVyKTtcblxuICAgIHJvdXRlckhlbHBlclByb3ZpZGVyLiRpbmplY3QgPSBbJyRsb2NhdGlvblByb3ZpZGVyJywnJHN0YXRlUHJvdmlkZXInLCckdXJsUm91dGVyUHJvdmlkZXInXTtcblxuICBmdW5jdGlvbiByb3V0ZXJIZWxwZXJQcm92aWRlcigkbG9jYXRpb25Qcm92aWRlciwkc3RhdGVQcm92aWRlciwkdXJsUm91dGVyUHJvdmlkZXIpe1xuXG4gICAgdmFyIGNvbmZpZyA9IHtcbiAgICAgIGRvY1RpdGxlIDogJ0NvbnZlcnRMYWInXG4gICAgfVxuXG4gICAgLy8gJGxvY2F0aW9uUHJvdmlkZXIuaHRtbDVNb2RlKHtcbiAgICAvLyAgIGVuYWJsZWQ6IHRydWUsXG4gICAgLy8gICByZXF1aXJlQmFzZTogZmFsc2VcbiAgICAvLyB9KTtcblxuICAgIHRoaXMuJGdldCA9IFJvdXRlckhlbHBlcjtcblxuICAgIFJvdXRlckhlbHBlci4kaW5qZWN0ID0gWyckc3RhdGUnLCckcm9vdFNjb3BlJ107XG5cbiAgICBmdW5jdGlvbiBSb3V0ZXJIZWxwZXIoJHN0YXRlLCAkcm9vdFNjb3BlKXtcbiAgICAgIHZhciBoYXNPdGhlcndpc2UgPSBmYWxzZTsgXG5cbiAgICAgIHZhciBzZXJ2aWNlID0ge1xuICAgICAgICBjb25maWd1cmVTdGF0ZSA6IGNvbmZpZ3VyZVN0YXRlLFxuICAgICAgICBnZXRTdGF0ZXMgOiBnZXRTdGF0ZXNcbiAgICAgIH07XG5cbiAgICAgIGluaXQoKTtcblxuICAgICAgcmV0dXJuIHNlcnZpY2U7XG5cbiAgICAgIGZ1bmN0aW9uIGNvbmZpZ3VyZVN0YXRlKHN0YXRlcywgb3RoZXJ3aXNlUGF0aCl7XG4gICAgICAgIHN0YXRlcy5mb3JFYWNoKGZ1bmN0aW9uKHN0YXRlKXtcbiAgICAgICAgICAkc3RhdGVQcm92aWRlci5zdGF0ZShzdGF0ZS5zdGF0ZSxzdGF0ZS5jb25maWcpO1xuICAgICAgICB9KTtcblxuICAgICAgICBpZiAoIG90aGVyd2lzZVBhdGggJiYgIWhhc090aGVyd2lzZSkge1xuICAgICAgICAgIGhhc090aGVyd2lzZSA9IHRydWU7IFxuICAgICAgICAgICR1cmxSb3V0ZXJQcm92aWRlci5vdGhlcndpc2Uob3RoZXJ3aXNlUGF0aCk7XG4gICAgICAgIH07XG4gICAgICB9O1xuICAgICAgZnVuY3Rpb24gZ2V0U3RhdGVzKCl7IHJldHVybiAkc3RhdGUuZ2V0KCl9O1xuXG4gICAgICBmdW5jdGlvbiBpbml0KCl7XG4gICAgICAgIHVwZGF0ZURvY1RpdGxlKCk7XG4gICAgICB9O1xuXG4gICAgICBmdW5jdGlvbiB1cGRhdGVEb2NUaXRsZSgpe1xuICAgICAgICAkcm9vdFNjb3BlLiRvbignJHN0YXRlQ2hhbmdlU3VjY2VzcycsXG4gICAgICAgICAgZnVuY3Rpb24oZXZlbnQsIHRvU3RhdGUsIHRvUGFyYW1zLCBmcm9tU3RhdGUsIGZyb21QYXJhbXMpe1xuICAgICAgICAgICAgdmFyIHRpdGxlID0gY29uZmlnLmRvY1RpdGxlICsgJyB8ICcgKyAodG9TdGF0ZS50aXRsZSB8fCAnJyk7XG4gICAgICAgICAgICBkb2N1bWVudC5ib2R5LnNjcm9sbFRvcCA9IGRvY3VtZW50LmRvY3VtZW50RWxlbWVudC5zY3JvbGxUb3AgPSAwO1xuICAgICAgICAgICAgJHJvb3RTY29wZS50aXRsZSA9IHRpdGxlO1xuXG4gICAgICAgICAgICAvLyB0cmFja2luZyBjb2RlXG4gICAgICAgICAgICBfY2xfdHJhY2tlci5pbml0KCk7XG4gICAgICAgICAgICBfY2xfdHJhY2tlci5wdXNoKHsgdXJsOiB0b1N0YXRlLnVybCwgdGFyZ2V0TmFtZTogdGl0bGUgfSk7XG4gICAgICAgICAgICBfY2xfdHJhY2tlci50cmFjaygnb3Blbl9wYWdlJyk7XG4gICAgICAgICAgfSk7XG4gICAgICB9O1xuICAgIH07XG4gIH07XG5cbn0pKCk7XG4iLCIoZnVuY3Rpb24oKXtcbiAgJ3VzZSBzdHJpY3QnO1xuICAvKipcbiogbGFuZGluZy5hYm91dCBNb2R1bGVcbipcbiogRGVzY3JpcHRpb25cbiovXG5hbmd1bGFyXG4gIC5tb2R1bGUoJ2xhbmRpbmcuYWJvdXQnKVxuICAuY29udHJvbGxlcignQWJvdXRDb250cm9sbGVyJyxBYm91dENvbnRyb2xsZXIpXG5cbiAgQWJvdXRDb250cm9sbGVyLiRpbmplY3QgPSBbJyRyb290U2NvcGUnXTtcblxuICBmdW5jdGlvbiBBYm91dENvbnRyb2xsZXIoJHJvb3RTY29wZSl7XG4gICAgdmFyIHZtID0gdGhpczsgXG4gICAgdmFyIHRvcCA9ICQoXCIjY2FyZWVyXCIpLm9mZnNldCgpLnRvcCAgLSAzLjUqcGFyc2VGbG9hdCgkKCcjY2FyZWVyJykuY3NzKCdtYXJnaW5Ub3AnKS5yZXBsYWNlKC9hdXRvLywwKSk7XG4gICAgJCgnI2pvaW51cycpLmNsaWNrKGZ1bmN0aW9uICgpIHtcbiAgICAgICAgJCgnaHRtbCxib2R5JykuYW5pbWF0ZSh7c2Nyb2xsVG9wOnRvcH0sIDUwMCk7XG4gICAgfSk7XG5cbiAgfTtcblxufSkoKTtcbiIsIihmdW5jdGlvbigpe1xuICAndXNlIHN0cmljdCc7XG5cbiAgLyoqXG4gICogbGFuZGluZy5ob21lIE1vZHVsZVxuICAqXG4gICogRGVzY3JpcHRpb25cbiAgKi9cbiAgYW5ndWxhclxuICAgIC5tb2R1bGUoJ2xhbmRpbmcuYWJvdXQnKVxuICAgIC5ydW4oYXBwUnVuKTtcblxuICAgIGFwcFJ1bi4kaW5qZWN0ID0gWydyb3V0ZXJIZWxwZXInXTtcblxuICAgIGZ1bmN0aW9uIGFwcFJ1biggcm91dGVySGVscGVyICl7XG4gICAgICByb3V0ZXJIZWxwZXIuY29uZmlndXJlU3RhdGUoZ2V0U3RhdGVzKCkpO1xuICAgIH1cblxuICAgIGZ1bmN0aW9uIGdldFN0YXRlcygpIHtcbiAgICAgICAgcmV0dXJuIFtcbiAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICBzdGF0ZTogJ2xhbmRpbmcuYWJvdXQnLFxuICAgICAgICAgICAgICAgIGNvbmZpZzoge1xuICAgICAgICAgICAgICAgICAgICB0ZW1wbGF0ZVVybDogJ3BhbmRhLWFib3V0Lmh0bWwnLFxuICAgICAgICAgICAgICAgICAgICB1cmw6ICcvYWJvdXQnLFxuICAgICAgICAgICAgICAgICAgICBjb250cm9sbGVyIDogJ0Fib3V0Q29udHJvbGxlcicsXG4gICAgICAgICAgICAgICAgICAgIGNvbnRyb2xsZXJBcyA6ICdBYm91dEN0cmwnLFxuICAgICAgICAgICAgICAgICAgICB0aXRsZSA6ICflhbPmlrzmiJHku6wnXG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICBdO1xuICAgIH07XG4gICAgXG59KSgpO1xuIiwiKGZ1bmN0aW9uKCl7XG4gICd1c2Ugc3RyaWN0JztcbiAgXG4gIC8qKlxuICAqIGFwcC5jYXJlZXIgTW9kdWxlXG4gICpcbiAgKiBEZXNjcmlwdGlvblxuICAqL1xuICBhbmd1bGFyXG4gICAgLm1vZHVsZSgnbGFuZGluZy5jYXJlZXInKVxuICAgIC5ydW4oYXBwUnVuKTtcblxuICAgIGFwcFJ1bi4kaW5qZWN0ID0gWydyb3V0ZXJIZWxwZXInXTtcblxuICAgIGZ1bmN0aW9uIGFwcFJ1biggcm91dGVySGVscGVyICl7XG4gICAgICByb3V0ZXJIZWxwZXIuY29uZmlndXJlU3RhdGUoZ2V0U3RhdGVzKCkpO1xuICAgIH07XG5cbiAgICBmdW5jdGlvbiBnZXRTdGF0ZXMoKXtcbiAgICAgIHJldHVybiBbXG4gICAgICAgIHtcbiAgICAgICAgICBzdGF0ZTogJ2xhbmRpbmcuY2FyZWVycycsXG4gICAgICAgICAgY29uZmlnOiB7XG4gICAgICAgICAgICAgIHRlbXBsYXRlVXJsOiAncGFuZGEtY2FyZWVyLmh0bWwnLFxuICAgICAgICAgICAgICB1cmw6ICcvY2FyZWVycy86aWQnLFxuICAgICAgICAgICAgICB0aXRsZSA6ICfogYznvLrmi5vogZgnXG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICBdO1xuICAgIH07XG5cbn0pKCk7IiwiKGZ1bmN0aW9uKCl7XG4gICd1c2Ugc3RyaWN0JztcbiAgICAvKipcbiAgKiBwYW5hZGFBcHAgTW9kdWxlXG4gICpcbiAgKiBEZXNjcmlwdGlvblxuICAqL1xuICBhbmd1bGFyXG4gICAgLm1vZHVsZSgnbGFuZGluZy5jYXJlZXInKVxuICAgIC5jb250cm9sbGVyKCdDYXJlZXJDb250cm9sbGVyJyxDYXJlZXJDb250cm9sbGVyKTtcblxuICAgIENhcmVlckNvbnRyb2xsZXIuJGluamVjdCA9IFtdO1xuXG4gICAgZnVuY3Rpb24gQ2FyZWVyQ29udHJvbGxlcigpe1xuICAgICAgdmFyIHZtID0gdGhpczsgXG4gICAgICAvLyB2bS5jYXJlZXJJZCA9ICRzdGF0ZVBhcmFtcy5pZDtcbiAgICAgIGNvbnNvbGUubG9nKFwiaXQgaXMgY2FyZWVyIHBhZ2VcIik7XG4gICAgfTtcblxufSkoKTtcblxuXG4iLCIoZnVuY3Rpb24oKXtcbiAgJ3VzZSBzdHJpY3QnO1xuICAvKipcbiAgKiBsYW5kaW5nLmZlYXR1cmUgTW9kdWxlXG4gICpcbiAgKiBEZXNjcmlwdGlvblxuICAqL1xuICBhbmd1bGFyXG4gICAgLm1vZHVsZSgnbGFuZGluZy5mZWF0dXJlJylcbiAgICAuY29udHJvbGxlcignRmVhdHVyZUNvbnRyb2xsZXInLEZlYXR1cmVDb250cm9sbGVyKTtcblxuICAgIEZlYXR1cmVDb250cm9sbGVyLiRpbmplY3QgPSBbXTtcblxuICAgIGZ1bmN0aW9uIEZlYXR1cmVDb250cm9sbGVyKCl7XG4gICAgICBcbiAgICB9O1xuXG59KSgpOyIsIihmdW5jdGlvbigpe1xuICAndXNlIHN0cmljdCc7XG5cbiAgLyoqXG4gICogbGFuZGluZy5mZWF0dXJlIE1vZHVsZVxuICAqXG4gICogRGVzY3JpcHRpb25cbiAgKi9cbiAgIGFuZ3VsYXJcbiAgICAubW9kdWxlKCdsYW5kaW5nLmZlYXR1cmUnKVxuICAgIC5ydW4oYXBwUnVuKTtcblxuICAgIGFwcFJ1bi4kaW5qZWN0ID0gWydyb3V0ZXJIZWxwZXInXTtcblxuICAgIGZ1bmN0aW9uIGFwcFJ1biggcm91dGVySGVscGVyICl7XG4gICAgICByb3V0ZXJIZWxwZXIuY29uZmlndXJlU3RhdGUoZ2V0U3RhdGVzKCkpO1xuICAgIH07XG5cbiAgICBmdW5jdGlvbiBnZXRTdGF0ZXMoKXtcbiAgICAgIHJldHVybiBbXG4gICAgICAgIHtcbiAgICAgICAgICBzdGF0ZTogJ2xhbmRpbmcuZmVhdHVyZScsXG4gICAgICAgICAgY29uZmlnOiB7XG4gICAgICAgICAgICAgIHRlbXBsYXRlVXJsOiAncGFuZGEtZmVhdHVyZS5odG1sJyxcbiAgICAgICAgICAgICAgdXJsOiAnL2ZlYXR1cmVzJyxcbiAgICAgICAgICAgICAgdGl0bGUgOiAn5Lqn5ZOB54m56ImyJ1xuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgXTtcbiAgICB9O1xuXG59KSgpOyIsIihmdW5jdGlvbigpe1xuICAvKipcbiogYXBwLmhvbWUgTW9kdWxlXG4qXG4qIERlc2NyaXB0aW9uXG4qL1xuYW5ndWxhclxuICAubW9kdWxlKCdsYW5kaW5nLmhvbWUnKVxuICAuY29udHJvbGxlcignSG9tZUNvbnRyb2xsZXInLEhvbWVDb250cm9sbGVyKVxuXG4gIEhvbWVDb250cm9sbGVyLiRpbmplY3QgPSBbJ0FjY291bnRTZXJ2aWNlJ107XG5cbiAgZnVuY3Rpb24gSG9tZUNvbnRyb2xsZXIoQWNjb3VudFNlcnZpY2Upe1xuICAgIHZhciB2bSA9IHRoaXM7XG4gICAgdm0uYWNjb3VudCA9IHt9O1xuICAgIHZtLnN1Ym1pdCA9IHN1Ym1pdDtcbiAgICBcbiAgICBcbiAgICAkKFwiLmhlYWRsaW5lXCIpLmhpZGUoKS5hbmltYXRlKHsgbGVmdDpcIjBweFwiLCBvcGFjaXR5Olwic2hvd1wifSwgMTUwMCk7XG5cbiAgICBmdW5jdGlvbiBzdWJtaXQoKXtcbiAgICAgIHJldHVybiBBY2NvdW50U2VydmljZS5wb3N0QWNjb3VudCh2bS5hY2NvdW50KTtcbiAgICB9O1xuXG4gIH07XG5cbn0pKCk7IiwiKGZ1bmN0aW9uKCl7XG4gICd1c2Ugc3RyaWN0JztcbiAgLyoqXG4gICogbGFuZGluZy5ob21lIE1vZHVsZVxuICAqXG4gICogRGVzY3JpcHRpb25cbiAgKi9cbiAgYW5ndWxhclxuICAgIC5tb2R1bGUoJ2xhbmRpbmcuaG9tZScpXG4gICAgLnJ1bihhcHBSdW4pO1xuXG4gICAgLyogQG5nSW5qZWN0ICovXG5cbiAgICBhcHBSdW4uJGluamVjdCA9IFsncm91dGVySGVscGVyJ107XG5cbiAgICBmdW5jdGlvbiBhcHBSdW4ocm91dGVySGVscGVyKSB7XG4gICAgICAgIHJvdXRlckhlbHBlci5jb25maWd1cmVTdGF0ZShnZXRTdGF0ZXMoKSwnLycpO1xuICAgIH07XG5cbiAgICBmdW5jdGlvbiBnZXRTdGF0ZXMoKSB7XG4gICAgICAgIHJldHVybiBbXG4gICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgc3RhdGU6ICdsYW5kaW5nLmhvbWUnLFxuICAgICAgICAgICAgICAgIGNvbmZpZzoge1xuICAgICAgICAgICAgICAgICAgICB0ZW1wbGF0ZVVybDogJ3BhbmRhLWhvbWUuaHRtbCcsXG4gICAgICAgICAgICAgICAgICAgIHVybDogJy8nLFxuICAgICAgICAgICAgICAgICAgICBjb250cm9sbGVyIDogJ0hvbWVDb250cm9sbGVyJyxcbiAgICAgICAgICAgICAgICAgICAgY29udHJvbGxlckFzIDogJ0hvbWVDdHJsJyxcbiAgICAgICAgICAgICAgICAgICAgdGl0bGUgOiAn6aaW6aG1J1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgXTtcbiAgICB9O1xuXG59KSgpOyIsIihmdW5jdGlvbigpe1xuICAndXNlIHN0cmljdCc7XG5cbiAgLyoqXG4gICogbGFuZGluZy5uYXZiYXIgTW9kdWxlXG4gICpcbiAgKiBEZXNjcmlwdGlvblxuICAqL1xuICBhbmd1bGFyXG4gICAgLm1vZHVsZSgnbGFuZGluZy5uYXZiYXInKVxuICAgIC5jb250cm9sbGVyKCdOYXZiYXJDb250cm9sbGVyJywgTmF2YmFyQ29udHJvbGxlcik7XG5cbiAgICBOYXZiYXJDb250cm9sbGVyLiRpbmplY3QgPSBbJyR1aWJNb2RhbCcsJyR3aW5kb3cnLCckc2NvcGUnLCckdHJhbnNsYXRlJ107XG5cbiAgICBmdW5jdGlvbiBOYXZiYXJDb250cm9sbGVyKCR1aWJNb2RhbCwgJHdpbmRvdywkc2NvcGUsICR0cmFuc2xhdGUpe1xuICAgICAgdmFyIHZtID0gdGhpczsgXG4gICAgICB2bS5zY3JvbGwgPSBmYWxzZTtcbiAgICAgIHZtLnRleHQgPSBcImhlbGxvIGdvIGdvXCI7XG4gICAgICB2bS5vcGVuUmVnaXN0ZXJNb2RhbCA9IG9wZW5SZWdpc3Rlck1vZGFsOyBcblxuICAgICAgZnVuY3Rpb24gb3BlblJlZ2lzdGVyTW9kYWwoKSB7XG4gICAgICAgIHJldHVybiAkdWliTW9kYWwub3Blbih7XG4gICAgICAgICAgYW5pbWF0aW9uOiB0cnVlLFxuICAgICAgICAgIHRlbXBsYXRlVXJsOiAncmVnaXN0ZXIubW9kYWwuaHRtbCcsXG4gICAgICAgICAgY29udHJvbGxlciA6ICdSZWdpc3RlckNvbnRyb2xsZXInLFxuICAgICAgICAgIGNvbnRyb2xsZXJBcyA6J1JlZ2lzdGVyQ3RybCcsXG4gICAgICAgICAgc2l6ZTogJ21kJ1xuICAgICAgICB9KTtcbiAgICAgIH07XG5cbiAgICAgICR0cmFuc2xhdGUoJ1RJVExFJykudGhlbihmdW5jdGlvbiAodGl0bGUpIHtcbiAgICAgICAgICBjb25zb2xlLmxvZyh0aXRsZSk7XG4gICAgICB9KTtcblxuICAgICAgJChcIiN0cnlcIikub24oXCJzY3JvbGxzdGFydFwiLGZ1bmN0aW9uKCl7XG4gICAgICAgIGFsZXJ0KFwiU3RhcnRlZCBzY3JvbGxpbmchXCIpO1xuICAgICAgfSk7XG5cbiAgICAgIC8vIGFuZ3VsYXIuZWxlbWVudCgkd2luZG93KS5iaW5kKFwic2Nyb2xsXCIsIGZ1bmN0aW9uKGUpIHtcbiAgICAgIC8vICAgJHNjb3BlLiRhcHBseShmdW5jdGlvbigpe1xuICAgICAgLy8gICAgIHZtLnNjcm9sbCA9IHRydWU7XG4gICAgICAvLyAgIH0pXG4gICAgICAvLyAgIGNvbnNvbGUubG9nKFwic3RhcnQgdG8gc2Nyb2xsXCIpIFxuICAgICAgLy8gfSk7XG5cblxuICAgIH07XG5cbn0pKCk7IiwiKGZ1bmN0aW9uKCl7XG4gICd1c2Ugc3RyaWN0JztcblxuICAvKipcbiAgKiBhcHAucmVnaXN0ZXIgTW9kdWxlXG4gICpcbiAgKiBEZXNjcmlwdGlvblxuICAqL1xuICBhbmd1bGFyXG4gICAgLm1vZHVsZSgnYXBwLnJlZ2lzdGVyJylcbiAgICAuY29udHJvbGxlcignUmVnaXN0ZXJDb250cm9sbGVyJyxSZWdpc3RlckNvbnRyb2xsZXIpO1xuXG4gICAgUmVnaXN0ZXJDb250cm9sbGVyLiRpbmplY3QgPSBbJ0FjY291bnRTZXJ2aWNlJywnJHVpYk1vZGFsSW5zdGFuY2UnXTtcblxuICAgIGZ1bmN0aW9uIFJlZ2lzdGVyQ29udHJvbGxlcihBY2NvdW50U2VydmljZSwkdWliTW9kYWxJbnN0YW5jZSl7XG4gICAgICB2YXIgdm0gPSB0aGlzOyBcbiAgICAgIHZtLmFjY291bnQgPSB7fTtcbiAgICAgIHZtLnN1Ym1pdEFjY291bnQgPSBzdWJtaXRBY2NvdW50O1xuICAgICAgdm0uY2FuY2VsID0gY2FuY2VsOyBcblxuICAgICAgZnVuY3Rpb24gc3VibWl0QWNjb3VudCgpe1xuICAgICAgIFxuICAgICAgICBBY2NvdW50U2VydmljZS5wb3N0QWNjb3VudCh2bS5hY2NvdW50KS50aGVuKGZ1bmN0aW9uKHJlcyl7XG4gICAgICAgICAgaWYgKHJlcykge1xuICAgICAgICAgICAgJHVpYk1vZGFsSW5zdGFuY2UuZGlzbWlzcygnY2FuY2VsJyk7XG4gICAgICAgICAgfTtcbiAgICAgICAgfSk7XG4gICAgICB9O1xuXG4gICAgICBmdW5jdGlvbiBjYW5jZWwoKXtcbiAgICAgICAgJHVpYk1vZGFsSW5zdGFuY2UuZGlzbWlzcygnY2FuY2VsJyk7XG4gICAgICB9O1xuICAgIH07XG5cbn0pKCk7Il0sInNvdXJjZVJvb3QiOiIvc291cmNlLyJ9
